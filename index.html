<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ÊõºË∞∑ 6 Â§© 5 Â§úË¶™Â≠êÂ∞ä‰∫´‰πãÊóÖ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Ê†∏ÂøÉ‰øÆÂæ©Ôºö‰ΩøÁî® dvh ÂñÆ‰ΩçÈÅ©ÈÖçÁßªÂãïÁ´ØÁÄèË¶ΩÂô®È´òÂ∫¶ */
        body, #app {
            height: 100vh; /* Fallback */
            height: 100dvh; /* Dynamic Viewport Height for Mobile */
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F3F4F6;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        /* Èö±Ëóè Scrollbar ‰ΩÜ‰øùÊåÅÂäüËÉΩ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Ê®°Êì¨ iOS ÂΩàÊÄßÊªæÂãï */
        .scrolling-touch {
            -webkit-overflow-scrolling: touch;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF8C00', // Ê≥∞ÂúãÊ©ò
                        secondary: '#4B0082', // ÁöáÂÆ§Á¥´
                        bg: '#F3F4F6',
                        michelin: '#BD2333' // Á±≥ËäùËìÆÁ¥Ö
                    }
                }
            }
        }
    </script>
</head>
<body class="overflow-hidden text-gray-800">

    <div id="app" class="flex flex-col relative max-w-md mx-auto bg-white shadow-2xl">
        
        <!-- Header -->
        <header class="bg-white px-5 pt-10 pb-4 shadow-sm z-10 flex justify-between items-center sticky top-0 shrink-0">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 tracking-tight">
                    <span class="text-primary">Sawadee</span> Bangkok üáπüá≠
                </h1>
                <p class="text-xs text-gray-500 font-medium mt-1">Ë¶™Â≠êÂ∞ä‰∫´‰πãÊóÖ (12/26 - 12/31)</p>
            </div>
            <button @click="showSettings = true" class="text-gray-400 hover:text-primary transition">
                <i class="fa-solid fa-gear text-lg"></i>
            </button>
        </header>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto no-scrollbar scrolling-touch bg-gray-50 p-4 pb-24 relative w-full">
            
            <!-- VIEW: ITINERARY (Ë°åÁ®ã) -->
            <div v-if="currentTab === 'itinerary'" class="space-y-4">
                
                <!-- Day Selector -->
                <div class="flex space-x-3 overflow-x-auto no-scrollbar pb-2">
                    <button 
                        v-for="(day, index) in tripDays" 
                        :key="index"
                        @click="activeDayIndex = index"
                        class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all transform active:scale-95 shadow-sm flex flex-col items-center min-w-[80px]"
                        :class="activeDayIndex === index ? 'bg-primary text-white shadow-md' : 'bg-white text-gray-500 border border-gray-100'"
                    >
                        <span>Day {{ index + 1 }}</span>
                        <span class="text-[10px] font-normal opacity-80">{{ day.date }}</span>
                    </button>
                    <button @click="addDay" class="flex-shrink-0 px-3 py-2 rounded-full text-sm bg-gray-200 text-gray-600">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>

                <!-- Day Title & Summary -->
                <div class="bg-orange-50 p-4 rounded-xl border border-orange-100 mb-2">
                    <h2 class="font-bold text-lg text-gray-800">{{ tripDays[activeDayIndex].title || 'Ëá™Áî±Ê¥ªÂãï' }}</h2>
                    <p class="text-xs text-gray-500 mt-1" v-if="tripDays[activeDayIndex].note">
                        <i class="fa-solid fa-circle-info mr-1 text-primary"></i>
                        {{ tripDays[activeDayIndex].note }}
                    </p>
                </div>

                <!-- Timeline List -->
                <div class="relative pl-4 space-y-6 mt-4">
                    <!-- Vertical Line -->
                    <div class="absolute left-4 top-2 bottom-2 w-0.5 bg-gray-200"></div>

                    <!-- Items -->
                    <div v-for="item in currentDayItems" :key="item.id" class="relative pl-6 group">
                        <!-- Dot -->
                        <div class="absolute left-[11px] top-1.5 w-3 h-3 bg-white border-2 border-primary rounded-full z-10 group-hover:bg-primary transition-colors"></div>
                        
                        <!-- Card -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 active:scale-[0.99] transition-transform">
                            <div class="flex justify-between items-start mb-2">
                                <div class="font-bold text-primary text-lg">{{ item.time }}</div>
                                <div class="flex space-x-1">
                                    <button v-if="item.thaiAddr" @click="showThaiAddress(item)" class="w-8 h-8 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center hover:bg-purple-100" title="È°ØÁ§∫Ê≥∞ÊñáÂú∞ÂùÄÁµ¶Âè∏Ê©üÁúã">
                                        <i class="fa-solid fa-language text-sm"></i>
                                    </button>
                                    <button @click="openMap(item.location)" class="w-8 h-8 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center hover:bg-blue-100">
                                        <i class="fa-solid fa-location-arrow text-sm"></i>
                                    </button>
                                    <button @click="editItem(item)" class="w-8 h-8 rounded-full bg-gray-50 text-gray-400 flex items-center justify-center hover:text-gray-600">
                                        <i class="fa-solid fa-pen text-xs"></i>
                                    </button>
                                </div>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg leading-tight mb-1">{{ item.title }}</h3>
                            
                            <div class="flex items-center text-gray-500 text-sm mb-2">
                                <i class="fa-solid fa-map-pin mr-1.5 text-xs text-gray-400 w-4 text-center"></i>
                                <span class="truncate">{{ item.location }}</span>
                            </div>

                            <div class="flex flex-wrap gap-2 mt-2">
                                <span v-if="item.transport" class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600">
                                    <i class="fa-solid fa-van-shuttle mr-1"></i> {{ item.transport }}
                                </span>
                                <span v-if="item.tags" v-for="tag in item.tags" :key="tag" class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-orange-50 text-orange-600">
                                    {{ tag }}
                                </span>
                            </div>

                            <p v-if="item.desc" class="text-sm text-gray-500 mt-3 border-t pt-2 border-gray-50 leading-relaxed">
                                {{ item.desc }}
                            </p>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div v-if="currentDayItems.length === 0" class="text-center py-10 text-gray-400">
                        <i class="fa-regular fa-calendar-xmark text-4xl mb-3 opacity-30"></i>
                        <p>ÈÄôÂ§©ÈÇÑÊ≤íÊúâË°åÁ®ã<br>ÈªûÊìä‰∏ãÊñπÊåâÈàïÊñ∞Â¢û</p>
                    </div>
                </div>
            </div>

            <!-- VIEW: FOOD GUIDE (ÁæéÈ£üÊåáÂçó) -->
            <div v-if="currentTab === 'food'" class="space-y-4">
                
                <!-- Food Category Selector -->
                <div class="flex space-x-2 overflow-x-auto no-scrollbar pb-2">
                    <button 
                        v-for="cat in foodCategories" 
                        :key="cat"
                        @click="activeFoodCategory = cat"
                        class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all border whitespace-nowrap"
                        :class="activeFoodCategory === cat ? 'bg-michelin text-white border-michelin shadow-md' : 'bg-white text-gray-500 border-gray-200'"
                    >
                        {{ cat }}
                    </button>
                </div>

                <!-- Restaurant List -->
                <div class="space-y-4">
                    <div v-for="spot in filteredFoodSpots" :key="spot.id || spot.name" class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col relative">
                        
                        <!-- Delete Button for Custom Spots -->
                        <button v-if="spot.isCustom" @click="deleteCustomFood(spot.id)" class="absolute top-2 right-2 text-gray-300 hover:text-red-500 p-2 z-10">
                            <i class="fa-solid fa-trash text-xs"></i>
                        </button>

                        <!-- Header / Tag -->
                        <div class="flex justify-between items-start p-4 pb-2">
                            <div class="flex flex-col pr-8">
                                <div class="flex items-center gap-2 mb-1 flex-wrap">
                                    <span v-if="spot.level === '1 Star'" class="bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded text-[10px] font-bold border border-yellow-200">
                                        <i class="fa-solid fa-star"></i> Á±≥ËäùËìÆ‰∏ÄÊòü
                                    </span>
                                    <span v-else-if="spot.level === 'Bib'" class="bg-red-50 text-michelin px-2 py-0.5 rounded text-[10px] font-bold border border-red-100">
                                        <i class="fa-solid fa-face-grin-tongue"></i> ÂøÖÊØîÁôªÊé®‰ªã
                                    </span>
                                    <span v-else-if="spot.isCustom" class="bg-blue-50 text-blue-600 px-2 py-0.5 rounded text-[10px] font-bold border border-blue-100">
                                        <i class="fa-solid fa-user-pen"></i> Ëá™Ë®ÇÊî∂Ëóè
                                    </span>
                                    <span v-else class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-[10px] font-bold">
                                        Âú®Âú∞Êé®Ëñ¶
                                    </span>
                                    <span class="text-xs text-gray-400 font-medium">{{ spot.price }}</span>
                                </div>
                                <h3 class="font-bold text-gray-900 text-lg">{{ spot.name }}</h3>
                                <p class="text-xs text-gray-500">{{ spot.engName }}</p>
                            </div>
                            <button @click="openMap(spot.engName || spot.name)" class="w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-500 hover:bg-blue-100 shadow-sm shrink-0">
                                <i class="fa-solid fa-location-dot"></i>
                            </button>
                        </div>
                        
                        <!-- Content -->
                        <div class="px-4 pb-4">
                            <div class="flex gap-2 mb-3">
                                <span class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-500">
                                    <i class="fa-solid fa-map-pin text-[10px] mr-1"></i> {{ spot.area }}
                                </span>
                                <span class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-500">
                                    <i class="fa-solid fa-utensils text-[10px] mr-1"></i> {{ spot.type }}
                                </span>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed border-t border-gray-50 pt-2" v-if="spot.mustEat">
                                <span class="font-bold text-gray-800">ÂøÖÈªûÔºö</span>{{ spot.mustEat }}
                            </p>
                            <p class="text-xs text-gray-400 mt-2" v-if="spot.note">
                                <i class="fa-solid fa-triangle-exclamation mr-1"></i> {{ spot.note }}
                            </p>
                        </div>
                    </div>

                    <!-- Empty State for filtered -->
                    <div v-if="filteredFoodSpots.length === 0" class="text-center py-10 text-gray-400">
                        <p>ÈÄôÂÄãÂçÄÂüüÊö´ÁÑ°È§êÂª≥Ë≥áÊñô</p>
                    </div>
                </div>
            </div>

            <!-- VIEW: EXPENSE (ÂàÜÂ∏≥) -->
            <div v-if="currentTab === 'expense'" class="space-y-6">
                <!-- Currency Calculator -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-gray-800 flex items-center gap-2">
                            <i class="fa-solid fa-money-bill-transfer text-green-500"></i> 
                            ÂåØÁéáË®àÁÆóÊ©ü
                        </h3>
                        <div class="flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded-lg">
                            <span class="text-gray-400">ÂåØÁéá:</span>
                            <input type="number" v-model.number="currentRate" @input="updateFromHKD" class="w-12 bg-transparent font-bold text-gray-700 text-right outline-none border-b border-gray-300 focus:border-primary" step="0.01">
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-3">
                        <div class="flex-1">
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ê≥∞Èäñ (THB)</label>
                            <div class="relative">
                                <input type="number" v-model.number="calcTHB" @input="updateFromTHB" class="w-full bg-gray-50 rounded-xl px-3 py-2 text-lg font-bold text-gray-800 outline-none focus:ring-2 focus:ring-primary focus:bg-white transition text-center" placeholder="0">
                            </div>
                        </div>
                        <div class="text-gray-300 pt-5">
                            <i class="fa-solid fa-right-left"></i>
                        </div>
                        <div class="flex-1">
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ê∏ØÂπ£ (HKD)</label>
                            <div class="relative">
                                <input type="number" v-model.number="calcHKD" @input="updateFromHKD" class="w-full bg-gray-50 rounded-xl px-3 py-2 text-lg font-bold text-gray-800 outline-none focus:ring-2 focus:ring-primary focus:bg-white transition text-center" placeholder="0">
                            </div>
                        </div>
                    </div>
                    <p class="text-[10px] text-gray-400 text-center mt-2">Ëº∏ÂÖ•‰ªª‰∏ÄÊ¨Ñ‰ΩçËá™ÂãïÊèõÁÆóÔºåÈ†êË®≠ÂåØÁéá 4.4</p>
                </div>

                <!-- Overview Card -->
                <div class="bg-gradient-to-r from-secondary to-purple-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden">
                    <div class="absolute right-0 top-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-10 -mt-10 blur-2xl"></div>
                    <div class="relative z-10">
                        <div class="text-purple-200 text-sm font-medium mb-1">Á∏ΩÊîØÂá∫ (Total)</div>
                        <div class="text-4xl font-bold tracking-tight">‡∏ø {{ totalExpense.toLocaleString() }}</div>
                        <div class="mt-4 flex space-x-2 overflow-x-auto no-scrollbar">
                            <div v-for="(person, idx) in members" :key="idx" class="bg-white/20 px-3 py-1 rounded-lg text-xs backdrop-blur-sm whitespace-nowrap">
                                {{ person }}: ‡∏ø {{ getPaidAmount(person).toLocaleString() }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-2 gap-3">
                    <button @click="showSettlementModal = true" class="bg-white border border-purple-100 text-secondary py-3 rounded-xl font-bold shadow-sm hover:bg-purple-50 transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-calculator"></i> ÁµêÁÆóÂ†±Ë°®
                    </button>
                    <button @click="openExpenseModal()" class="bg-secondary text-white py-3 rounded-xl font-bold shadow-md shadow-purple-200 active:scale-95 transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-plus"></i> Êñ∞Â¢ûÊ∂àË≤ª
                    </button>
                </div>

                <!-- Expense List -->
                <div>
                    <h3 class="font-bold text-gray-700 mb-3 px-1">ÊúÄËøëÊ∂àË≤ªË®òÈåÑ</h3>
                    <div class="space-y-3">
                        <div v-for="exp in expenses" :key="exp.id" class="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border border-gray-50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-purple-50 text-secondary flex items-center justify-center font-bold text-xs">
                                    {{ exp.payer.charAt(0) }}
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800">{{ exp.title }}</div>
                                    <div class="text-xs text-gray-500">{{ exp.payer }} ÂÖà‰ªò</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-gray-900">‡∏ø{{ exp.amount }}</div>
                                <button @click="deleteExpense(exp.id)" class="text-xs text-red-300 hover:text-red-500 mt-1">Âà™Èô§</button>
                            </div>
                        </div>
                        <div v-if="expenses.length === 0" class="text-center py-8 text-gray-400 text-sm">
                            Â∞öÁÑ°Ê∂àË≤ªË®òÈåÑ
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <!-- Floating Action Button -->
        <button 
            v-if="currentTab === 'itinerary'"
            @click="openItineraryModal()"
            class="absolute bottom-24 right-5 w-14 h-14 bg-primary text-white rounded-full shadow-lg shadow-orange-200 flex items-center justify-center text-2xl active:scale-90 transition transform z-20"
        >
            <i class="fa-solid fa-plus"></i>
        </button>

        <button 
            v-if="currentTab === 'food'"
            @click="openFoodModal()"
            class="absolute bottom-24 right-5 w-14 h-14 bg-michelin text-white rounded-full shadow-lg shadow-red-200 flex items-center justify-center text-2xl active:scale-90 transition transform z-20"
        >
            <i class="fa-solid fa-plus"></i>
        </button>

        <!-- Bottom Navigation (Fixed) -->
        <nav class="bg-white border-t border-gray-100 flex justify-around items-center px-2 py-3 pb-safe z-30 shrink-0 sticky bottom-0 w-full">
            <button @click="currentTab = 'itinerary'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'itinerary' ? 'text-primary' : 'text-gray-400'">
                <i class="fa-solid fa-map-location-dot text-xl"></i>
                <span class="text-xs font-medium">Ë°åÁ®ã</span>
            </button>
            <button @click="currentTab = 'food'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'food' ? 'text-michelin' : 'text-gray-400'">
                <i class="fa-solid fa-utensils text-xl"></i>
                <span class="text-xs font-medium">ÁæéÈ£üÊåáÂçó</span>
            </button>
            <button @click="currentTab = 'expense'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'expense' ? 'text-secondary' : 'text-gray-400'">
                <i class="fa-solid fa-coins text-xl"></i>
                <span class="text-xs font-medium">ÂàÜÂ∏≥/ÂåØÁéá</span>
            </button>
        </nav>


        <!-- MODAL: ADD/EDIT ITINERARY -->
        <div v-if="showItineraryModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">{{ isEditing ? 'Á∑®ËºØË°åÁ®ã' : 'Êñ∞Â¢ûË°åÁ®ã' }}</h3>
                
                <div class="space-y-4 max-h-[60vh] overflow-y-auto no-scrollbar">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÊôÇÈñì</label>
                        <input v-model="formItinerary.time" type="time" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ê¥ªÂãïÂêçÁ®±</label>
                        <input v-model="formItinerary.title" type="text" placeholder="‰æãÔºöÂéªÊ¥ΩÂúñÊ¥ΩÈÄõË°ó" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Âú∞Èªû (Google Maps)</label>
                        <input v-model="formItinerary.location" type="text" placeholder="‰æãÔºöChatuchak Market" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‰∫§ÈÄöÊñπÂºè</label>
                        <input v-model="formItinerary.transport" type="text" placeholder="‰æãÔºöÂåÖËªä„ÄÅGrab" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂÇôË®ª / Ê≥∞ÊñáÂú∞ÂùÄ</label>
                        <textarea v-model="formItinerary.desc" rows="3" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary text-sm"></textarea>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showItineraryModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button v-if="isEditing" @click="deleteItinerary" class="flex-none px-4 py-3 rounded-xl bg-red-50 text-red-500 font-bold"><i class="fa-solid fa-trash"></i></button>
                    <button @click="saveItinerary" class="flex-1 py-3 rounded-xl bg-primary text-white font-bold shadow-lg shadow-orange-100">ÂÑ≤Â≠ò</button>
                </div>
            </div>
        </div>

        <!-- MODAL: ADD FOOD -->
        <div v-if="showFoodModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">Êñ∞Â¢ûÁæéÈ£üÈ§êÂª≥</h3>
                
                <div class="space-y-4 max-h-[60vh] overflow-y-auto no-scrollbar">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">È§êÂª≥ÂêçÁ®±</label>
                        <input v-model="formFood.name" type="text" placeholder="‰æãÔºöAfter You Dessert" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ëã±Êñá/Ê≥∞ÊñáÂ∫óÂêç (Google MapsÁî®)</label>
                        <input v-model="formFood.engName" type="text" placeholder="‰æãÔºöAfter You Siam Paragon" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">Âú∞ÂçÄ</label>
                            <select v-model="formFood.category" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin appearance-none">
                                <option v-for="cat in foodCategories.filter(c => c !== 'ÂÖ®ÂçÄ')" :key="cat" :value="cat">{{ cat }}</option>
                                <option value="Other">ÂÖ∂‰ªñ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">ÂÉπ‰Ωç</label>
                            <select v-model="formFood.price" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin appearance-none">
                                <option value="‡∏ø">‡∏ø (‰æøÂÆú)</option>
                                <option value="‡∏ø‡∏ø">‡∏ø‡∏ø (‰∏≠ÂÉπ)</option>
                                <option value="‡∏ø‡∏ø‡∏ø">‡∏ø‡∏ø‡∏ø (È´òÁ¥ö)</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÊñôÁêÜÈ°ûÂûã</label>
                        <input v-model="formFood.type" type="text" placeholder="‰æãÔºöÁîúÈªû„ÄÅÂíñÂï°Âª≥" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂøÖÂêÉËèúËâ≤</label>
                        <input v-model="formFood.mustEat" type="text" placeholder="‰æãÔºöËäíÊûúÁ≥ØÁ±≥Âà®ÂÜ∞" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂÇôË®ª</label>
                        <textarea v-model="formFood.note" rows="2" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin text-sm"></textarea>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showFoodModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button @click="saveFood" class="flex-1 py-3 rounded-xl bg-michelin text-white font-bold shadow-lg shadow-red-200">Âä†ÂÖ•Ê∏ÖÂñÆ</button>
                </div>
            </div>
        </div>

        <!-- MODAL: THAI ADDRESS -->
        <div v-if="showThaiAddrModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-6 backdrop-blur-sm">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl text-center">
                <div class="w-16 h-16 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">
                    <i class="fa-solid fa-taxi"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-500 mb-2">Ë´ãÂè∏Ê©üÂéªÈÄôË£°</h3>
                <h2 class="text-2xl font-bold text-gray-900 mb-6 leading-relaxed select-all">{{ thaiAddrContent }}</h2>
                <button @click="showThaiAddrModal = false" class="w-full py-3 rounded-xl bg-gray-800 text-white font-bold">ÈóúÈñâ</button>
            </div>
        </div>

        <!-- MODAL: ADD EXPENSE -->
        <div v-if="showExpenseModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">Ë®ò‰∏ÄÁ≠Ü</h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">È†ÖÁõÆ</label>
                        <input v-model="formExpense.title" type="text" placeholder="‰æãÔºöÂçàÈ§ê„ÄÅGrab" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-secondary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÈáëÈ°ç (THB)</label>
                        <input v-model.number="formExpense.amount" type="number" placeholder="0" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-secondary text-lg font-mono">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ë™∞ÂÖà‰ªòÁöÑÔºü</label>
                        <div class="flex flex-wrap gap-2">
                            <button 
                                v-for="m in members" 
                                :key="m"
                                @click="formExpense.payer = m"
                                class="px-4 py-2 rounded-lg text-sm font-bold border transition"
                                :class="formExpense.payer === m ? 'bg-secondary text-white border-secondary' : 'bg-white text-gray-500 border-gray-200'"
                            >
                                {{ m }}
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showExpenseModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button @click="saveExpense" class="flex-1 py-3 rounded-xl bg-secondary text-white font-bold shadow-lg shadow-purple-200">Êñ∞Â¢û</button>
                </div>
            </div>
        </div>

        <!-- MODAL: SETTLEMENT REPORT -->
        <div v-if="showSettlementModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl max-h-[80vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">ÁµêÁÆóÂª∫Ë≠∞</h3>
                    <button @click="showSettlementModal = false" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-500"><i class="fa-solid fa-xmark"></i></button>
                </div>

                <div class="bg-blue-50 p-4 rounded-xl text-sm text-blue-800 mb-4">
                    <p class="font-bold mb-1">Á∏ΩËä±Ë≤ª: ‡∏ø{{ totalExpense }}</p>
                    <p>Âπ≥ÂùáÊØè‰∫∫: ‡∏ø{{ (totalExpense / members.length).toFixed(1) }}</p>
                </div>

                <div v-if="settlements.length > 0" class="space-y-3">
                    <div v-for="(s, idx) in settlements" :key="idx" class="flex items-center justify-between p-3 border border-gray-100 rounded-xl shadow-sm">
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-red-500">{{ s.from }}</span>
                            <i class="fa-solid fa-arrow-right text-gray-300 text-xs"></i>
                            <span class="font-bold text-green-500">{{ s.to }}</span>
                        </div>
                        <span class="font-mono font-bold bg-gray-100 px-2 py-1 rounded">‡∏ø{{ Math.round(s.amount) }}</span>
                    </div>
                    <p class="text-xs text-gray-400 text-center mt-4">Â∑≤‰ΩøÁî®ÊúÄÂ∞èËΩâÂ∏≥Ê¨°Êï∏ÊºîÁÆóÊ≥ïÂÑ™Âåñ</p>
                </div>
                <div v-else class="text-center py-6 text-green-600 font-bold">
                    <i class="fa-solid fa-check-circle text-3xl mb-2"></i>
                    <p>Â∏≥ÁõÆÂ∑≤Âπ≥Ë°°Ôºå‰∏çÈúÄË¶ÅËΩâÂ∏≥ÔºÅ</p>
                </div>
            </div>
        </div>

        <!-- MODAL: SETTINGS (MEMBERS) -->
        <div v-if="showSettings" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl">
                <h3 class="text-xl font-bold mb-4">Ë®≠ÂÆö</h3>
                
                <div class="mb-4">
                    <label class="block text-xs font-bold text-gray-500 mb-2">ÊóÖ‰º¥ÁÆ°ÁêÜ</label>
                    <div class="flex gap-2 mb-2">
                        <input v-model="newMemberName" type="text" placeholder="Ëº∏ÂÖ•ÂêçÂ≠ó" class="flex-1 bg-gray-100 rounded-xl px-4 py-2 outline-none">
                        <button @click="addMember" class="bg-gray-800 text-white px-4 rounded-xl font-bold">+</button>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <div v-for="(m, idx) in members" :key="idx" class="bg-gray-100 px-3 py-1 rounded-full text-sm flex items-center gap-2">
                            {{ m }}
                            <button @click="removeMember(idx)" class="text-gray-400 hover:text-red-500" v-if="members.length > 1">√ó</button>
                        </div>
                    </div>
                </div>

                <div class="pt-4 border-t">
                    <button @click="resetAllData" class="w-full py-3 rounded-xl border border-red-200 text-red-500 font-bold mb-2">ÈÇÑÂéüÈ†êË®≠Ë°åÁ®ã (ÈáçÁΩÆ)</button>
                    <button @click="showSettings = false" class="w-full py-3 rounded-xl bg-gray-800 text-white font-bold">ÂÆåÊàê</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;

        const defaultItinerary = [
            { 
                id: 1, 
                date: '12/26 (‰∫î)',
                title: 'ÂïüÁ®ãÊõºË∞∑„ÉªÂàùË¶ãÊ≥∞Âë≥', 
                note: 'Âª∫Ë≠∞ÔºöÊ©üÂ†¥Âà∞È£ØÂ∫óÂåÖËªäÊúÄËàíÈÅ©',
                items: [
                    { id: 101, time: '12:05', title: 'ÊäµÈÅî BKK Ê©üÂ†¥', location: 'Suvarnabhumi Airport', desc: 'È†òÂÆåË°åÊùéÂæåÔºåÂâçÂæÄÈ†êÂÆöÂ•ΩÁöÑÂ∞àËªäÊé•Ê©üÈªûÈõÜÂêà„ÄÇ', transport: 'ÂåÖËªä/Êé•ÈÄÅ' },
                    { id: 102, time: '14:00', title: 'È£ØÂ∫ó Check-in & ‰ºëÊÅØ', location: 'Centre Point Hotel Sukhumvit 10', thaiAddr: '39 ‡∏ã‡∏≠‡∏¢ ‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó 10 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', desc: 'ËÆìÈï∑Ëº©Â∞èÂ≠©ÂÖà‰ºëÊÅØÔºåÊï¥ÁêÜË°åÊùé„ÄÇ', tags: ['‰ΩèÂÆø'] },
                    { id: 103, time: '15:30', title: 'Chef Ple ËäíÊûúÁ≥ØÁ±≥È£Ø', location: 'Chef Ple Thai Mango Sticky Rice', desc: 'Âú® Times Square Building ÊóÅ„ÄÇÂèØÂ§ñÂ∏∂ÂõûÈ£ØÂ∫óÂêÉ„ÄÇ', transport: 'Ê≠•Ë°å/TukTuk' },
                    { id: 104, time: '17:30', title: 'EmSphere ÂïÜÂ†¥ÊôöÈ§ê', location: 'EmSphere', thaiAddr: '628 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡∏±‡∏ô ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', desc: 'È§êÂª≥ÔºöKub Kao Kub Pla (ÂêÉÈ£ØÂêÉÈ≠ö)„ÄÇÁí∞Â¢ÉËàíÈÅ©ÔºåÂè£Âë≥ÈÅ©ÂêàÂÖ®ÂÆ∂„ÄÇ', transport: 'Grab/ÂåÖËªä', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 2, 
                date: '12/27 (ÂÖ≠)',
                title: 'Ê≥∞ÊúçÁ©øË∂ä„ÉªÊ≤≥ÁïîÁõõÂÆ¥', 
                note: 'ÈáçÈªûÊó•ÔºÅÊ≥®ÊÑèÈï∑Ëº©È´îÂäõÔºåÈÑ≠ÁéãÂªüÊ®ìÊ¢ØÈô°Â≥≠„ÄÇ',
                items: [
                    { id: 201, time: '09:30', title: 'ÈÑ≠ÁéãÂªüÊ≥∞ÊúçÈ´îÈ©ó', location: 'Wat Arun', thaiAddr: '158 ‡∏ñ‡∏ô‡∏ô‡∏ß‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ß‡∏±‡∏î‡∏≠‡∏£‡∏∏‡∏ì ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Å‡∏≠‡∏Å‡πÉ‡∏´‡∏ç‡πà', desc: 'Vision Thai Studio ÊèõË£ù„ÄÇÈï∑Ëº©ËàáÂπºÁ´•Âª∫Ë≠∞Âú®Âπ≥Èù¢Â∫≠ÂúíÊãçÁÖßÂç≥ÂèØÔºåÊ≥®ÊÑèÂÆâÂÖ®„ÄÇ', transport: 'ÂåÖËªä' },
                    { id: 202, time: '12:30', title: 'ICONSIAM ÂçàÈ§ê', location: 'ICONSIAM', thaiAddr: '299 ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏ô‡∏Ñ‡∏£ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏ó‡∏£ ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡∏™‡∏≤‡∏ô', desc: 'Âª∫Ë≠∞Ëá≥È´òÊ®ìÂ±§È§êÂª≥ÔºàÂ¶Ç Nara Thai CuisineÔºâ„ÄÇÈ§êÂæåÂèØÈÄõ SookSiam ÂÆ§ÂÖßÊ∞¥‰∏äÂ∏ÇÂ†¥„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 203, time: '15:00', title: '‰æèÁæÖÁ¥ÄÂ±ïË¶Ω', location: 'ICONSIAM Jurassic World', desc: 'Âú®ÂÜ∑Ê∞£ÊàøÂÖßÈ´îÈ©óÊ≤âÊµ∏ÂºèÊÅêÈæç‰∏ñÁïåÔºåÂ∞èÊúãÂèãÁöÑÊúÄÊÑõ„ÄÇ', tags: ['Â±ïË¶Ω'] },
                    { id: 204, time: '17:30', title: 'Asiatique Ê≤≥Êø±Â§úÂ∏ÇÊôöÈ§ê', location: 'Asiatique The Riverfront', thaiAddr: '2194 ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏Å‡∏£‡∏∏‡∏á ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡∏¢‡∏≤‡πÑ‡∏Å‡∏£ ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≠‡πÅ‡∏´‡∏•‡∏°', desc: 'ÊôöÈ§êÊé®Ëñ¶ÔºöKo Dang Talay (Êµ∑ÈÆÆÂÄâÂ∫´)„ÄÇÁí∞Â¢ÉÂØ¨ÊïûÈÅ©ÂêàÂ§ßÂÆ∂Â∫≠„ÄÇ', transport: 'ÂåÖËªä/Grab', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 3, 
                date: '12/28 (Êó•)',
                title: 'ÈÄ±Êú´Ê∑òÂØ∂„ÉªÂú®Âú∞Èá£Ëù¶Ê®Ç', 
                note: 'ÂàÜÁµÑË°åÂãïÔºöÈï∑Ëº©ÂπºÁ´•ÂêπÂÜ∑Ê∞£ÔºåÊé°Ë≥ºÁµÑÈÄõÂ∏ÇÈõÜ„ÄÇ',
                items: [
                    { id: 301, time: '10:00', title: 'Ê¥ΩÂúñÊ¥ΩÂ∏ÇÈõÜ / Mixt ÂïÜÂ†¥', location: 'Mixt Chatuchak', thaiAddr: '8 Kamphaeng Phet 3 Rd, Chatuchak', desc: 'Èï∑Ëº©ÂπºÁ´•Âú® Mixt ÂïÜÂ†¥ÂêπÂÜ∑Ê∞£‰ºëÊÅØ„ÄÇÊé°Ë≥ºÁµÑÂéªÊà∂Â§ñÂ∏ÇÈõÜÂ∞ãÂØ∂„ÄÇÂçàÈ§êÂú®ÂïÜÂ†¥ÂÖßËß£Ê±∫„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 302, time: '15:30', title: 'È£ØÂ∫óÊ≥≥Ê±† / Ë∂≥ÈÉ®ÊåâÊë©', location: 'Centre Point Hotel Sukhumvit 10', desc: 'ÂçàÂæåÈÅøÊöë„ÄÇÂ∞èÊúãÂèãÁé©Ê∞¥ÔºåÂ§ß‰∫∫Âú®ÈôÑËøëÊâæÊåâÊë©Â∫óÊîæÈ¨Ü„ÄÇ', transport: 'ÂõûÈ£ØÂ∫ó' },
                    { id: 303, time: '17:30', title: 'Èá£Ëù¶È´îÈ©óÊôöÈ§ê', location: 'Bor Tok Kung Charoen Nakhon 16', thaiAddr: '‡∏ö‡πà‡∏≠‡∏ï‡∏Å‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏ô‡∏Ñ‡∏£ 16 (Soi Charoen Nakhon 16)', desc: 'È´îÈ©óÂú®Âú∞Â®õÊ®ÇÔºÅÂª∫Ë≠∞ÂÖàÈªû‰∏Ä‰∫õÁÜ±ÁÇí‰ª•ÂÖçÁ≠âÂ§™‰πÖÈ§ìËÇöÂ≠ê„ÄÇ', transport: 'ÂåÖËªä/Grab', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 4, 
                date: '12/29 (‰∏Ä)',
                title: 'ÈáéÁîüÂãïÁâ©Âúí„ÉªË¶™Â≠êÂêåÊ®Ç', 
                note: 'Âº∑ÁÉàÂª∫Ë≠∞‰ªäÊó•ÂÖ®Êó•ÂåÖËªäÔºåÊñπ‰æø‰ºëÊÅØËàáÁΩÆÁâ©„ÄÇ',
                items: [
                    { id: 401, time: '08:30', title: 'Safari World ÈáéÁîüÂãïÁâ©Âúí', location: 'Safari World', thaiAddr: '99 ‡∏ñ‡∏ô‡∏ô‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏™‡∏≤‡∏°‡∏ß‡∏≤‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏ß‡∏≤', desc: '‰∏äÂçàÊê≠ËªäÈÅäÈáéÁîüÂãïÁâ©ÂçÄ (Safari Park)Ôºå‰∏ãÂçàÊ≠•Ë°åÊµ∑Ê¥ãÂÖ¨ÂúíÂçÄ (Marine Park)„ÄÇÂøÖÂéªÈï∑È†∏ÈπøÈ§µÈ£ü‰∫≠„ÄÇ', transport: 'ÂåÖËªä', tags: ['ÂÖ®Êó•ÈÅä'] },
                    { id: 402, time: '18:30', title: 'Central World ÊôöÈ§ê', location: 'Central World', thaiAddr: '999/9 ‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏ó‡∏µ‡πà ‡πë ‡πÅ‡∏Ç‡∏ß‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'ÊôöÈ§êÔºöSavoey Seafood (‰∏äÂë≥Ê≥∞È§êÈ§®)Ôºå2Ê®ì Groove ÂçÄ„ÄÇÊé®Ëñ¶ÂíñÂì©ËûÉËüπ„ÄÇ', transport: 'ÂåÖËªäÂõûÂ∏ÇÂçÄ', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 5, 
                date: '12/30 (‰∫å)',
                title: '‰º¥ÊâãÁ¶Æ„ÉªÊµ∑Ê¥ãÊé¢Á¥¢„ÉªÂ§úÂ∏Ç', 
                note: 'Âà©Áî® Skywalk ÈÄ£ÈÄöÈÅìÁßªÂãïÔºåËàíÈÅ©Ê∂ºÁàΩ„ÄÇ',
                items: [
                    { id: 501, time: '11:00', title: 'Big C Êé°Ë≤∑‰º¥ÊâãÁ¶Æ', location: 'Big C Supercenter Rajdamri', thaiAddr: '97/11 ‡∏ñ‡∏ô‡∏ô‡∏£‡∏≤‡∏ä‡∏î‡∏≥‡∏£‡∏¥ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ ‡πÄ‡∏Ç‡∏ï‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'Â∞±Âú® Central World Â∞çÈù¢„ÄÇË≤∑ÂÆåÂèØÂØÑÊîæÊàñË´ãÂè∏Ê©üËºâÂõû„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 502, time: '13:00', title: 'ÂçàÈ§êÔºöThong Smith ËàπÈ∫µ', location: 'Central World', desc: '‰ΩçÊñº 3 Ê®ì Beacon ÂçÄ„ÄÇÈ´òÁ¥öËàπÈ∫µÔºåËæ£Â∫¶ÂèØË™øÊï¥„ÄÇ', tags: ['ÂçàÈ§ê'] },
                    { id: 503, time: '14:30', title: 'Sea Life Ê∞¥ÊóèÈ§® / ‰∏ãÂçàËå∂', location: 'Siam Paragon', thaiAddr: '991 ‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'Ë¶™Â≠êÁµÑÔºöÂéª B1-B2 Ê∞¥ÊóèÈ§®„ÄÇ‰ºëÈñíÁµÑÔºöÂú®ÁôæË≤®Âñù‰∏ãÂçàËå∂„ÄÇÂæû Central World Ëµ∞ Skywalk ÈÅé‰æÜ„ÄÇ', transport: 'Ê≠•Ë°å Skywalk' },
                    { id: 504, time: '18:00', title: 'Âñ¨Âæ∑Â§úÂ∏ÇÊôöÈ§ê', location: 'Jodd Fairs Rama 9', thaiAddr: '‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á', desc: 'ÊôöÈ§êÂêÉÁÅ´Â±±ÊéíÈ™®„ÄÇÈï∑Ëº©Ëã•ÊÄïÁÜ±ÂèØÂéªÊóÅÈÇä Central Rama 9 ÂïÜÂ†¥‰ºëÊÅØ„ÄÇ', transport: 'Grab/ÂåÖËªä', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 6, 
                date: '12/31 (‰∏â)',
                title: 'ÊªøËºâËÄåÊ≠∏„ÉªÂÜçÊúÉÊõºË∞∑', 
                note: 'Ê™¢Êü•Êà∞Âà©ÂìÅÔºåÊ∫ñÂÇôÂâçÂæÄÊ©üÂ†¥„ÄÇ',
                items: [
                    { id: 601, time: '09:30', title: 'ÊÇ†ÈñíÊó©È§ê & Êî∂Êãæ', location: 'Centre Point Hotel Sukhumvit 10', desc: '‰∫´ÂèóÊúÄÂæåÁöÑÈ£ØÂ∫óÊôÇÂÖâ„ÄÇ' },
                    { id: 602, time: '11:00', title: 'ÂâçÂæÄÊ©üÂ†¥ (BKK)', location: 'Suvarnabhumi Airport', desc: 'Êê≠‰πòÂ∞àËªäÈÄÅÊ©ü„ÄÇËªäÁ®ãÁ¥Ñ 45-60 ÂàÜÈêò„ÄÇ', transport: 'ÂåÖËªäÈÄÅÊ©ü' },
                    { id: 603, time: '13:45', title: 'Ëà™Áè≠Ëµ∑È£õ (EK384)', location: 'Suvarnabhumi Airport', desc: '13:45 BKK -> 17:40 HKG', tags: ['È£õÊ©ü'] }
                ]
            }
        ];

        // Michelin Guide Data (Static)
        const defaultMichelinData = [
            // Old Town / Chinatown
            {
                name: "Jay Fai (Áó£Âßê)",
                engName: "Raan Jay Fai",
                area: "ËàäÂüéÂçÄ (Old Town)",
                category: "Old Town",
                level: "1 Star",
                type: "Ë°óÈ†≠ÁÜ±ÁÇí",
                mustEat: "ÈªÉÈáëËüπËÇâËõãÊç≤ (Crab Omelette), ÈÜâÊº¢È∫µ",
                price: "‡∏ø‡∏ø‡∏ø‡∏ø",
                note: "ÂÉπÊ†ºÊòÇË≤¥ÔºåÈúÄÊéíÈöäÊï∏Â∞èÊôÇÊàñÈ†êÁ¥Ñ„ÄÇÂîØ‰∏ÄÁ±≥ËäùËìÆÊòüÁ¥öË∑ØÈÇäÊî§„ÄÇ"
            },
            {
                name: "Thipsamai (È¨ºÈñÄÊ≥∞ÂºèÁÇíÈ∫µ)",
                engName: "Thipsamai Pad Thai Pratoopee",
                area: "ËàäÂüéÂçÄ (Old Town)",
                category: "Old Town",
                level: "Bib",
                type: "ÁÇíÊ≤≥Á≤â",
                mustEat: "ËõãÂåÖÊ≥∞ÂºèÁÇíÊ≤≥ (Superb Pad Thai)",
                price: "‡∏ø‡∏ø",
                note: "Â∞±Âú® Jay Fai ÊóÅÈÇäÔºåÊéíÈöä‰∫∫ÊΩÆÂ§ö‰ΩÜÊµÅÂãïÂø´„ÄÇÊ©òÂ≠êÊ±ÅÂøÖÈªûÔºÅ"
            },
            {
                name: "Nai Mong Hoi Thod (ÂÖßËíôË†îÁÖé)",
                engName: "Nai Mong Hoi Thod",
                area: "Âîê‰∫∫Ë°ó (Chinatown)",
                category: "Old Town",
                level: "Bib",
                type: "Ëöµ‰ªîÁÖé",
                mustEat: "ËÑÜÁöÆËöµ‰ªîÁÖé (Crispy Oyster Omelette)",
                price: "‡∏ø‡∏ø",
                note: "‰ΩçÊñºÂîê‰∫∫Ë°óÈÇäÁ∑£ÔºåÂè£ÊÑüÊ•µÂ∫¶ÈÖ•ËÑÜ„ÄÇ"
            },
            {
                name: "Lim Lao Ngow (ÊûóËÄÅ‰∫îÈ≠ö‰∏∏)",
                engName: "Lim Lao Ngow Fishball Noodle",
                area: "Âîê‰∫∫Ë°ó (Chinatown)",
                category: "Old Town",
                level: "Bib",
                type: "È≠ö‰∏∏È∫µ",
                mustEat: "‰πæÊãåÈ≠ö‰∏∏È∫µ",
                price: "‡∏ø",
                note: "ÁôæÂπ¥ËÄÅÂ∫óÔºåÈ≠ö‰∏∏QÂΩàÁÑ°Á≤âÊÑü„ÄÇÊôö‰∏äÊâçÈñã„ÄÇ"
            },
            
            // Sukhumvit
            {
                name: "Rung Rueang (Ê¶ÆÊ≥∞Á±≥Á≤âÊπØ)",
                engName: "Rung Rueang Pork Noodle",
                area: "Sukhumvit (Phrom Phong)",
                category: "Sukhumvit",
                level: "Bib",
                type: "Ë±¨ËÇâÈ∫µ",
                mustEat: "ÈÖ∏Ëæ£Ë±¨ËÇâÁ±≥Á≤âÊπØ (Tom Yum Pork Noodles)",
                price: "‡∏ø",
                note: "‰ΩçÊñº Soi 26ÔºåÊúâÂÖ©ÈñìÂ∫óÈù¢Áõ∏ÈÑ∞ÔºåÈÉΩÊòØË¶™ÊàöÈñãÁöÑÔºåÂë≥ÈÅìÂ∑Æ‰∏çÂ§ö„ÄÇ"
            },
            {
                name: "Here Hai (Êµ∑Êµ∑)",
                engName: "Here Hai Restaurant",
                area: "Sukhumvit (Ekkamai)",
                category: "Sukhumvit",
                level: "Bib",
                type: "Êµ∑ÈÆÆÁÜ±ÁÇí",
                mustEat: "ËüπËÇâÁÇíÈ£Ø (Insane Crab Fried Rice)",
                price: "‡∏ø‡∏ø‡∏ø",
                note: "ËüπËÇâ‰ªΩÈáèÈ©ö‰∫∫ÔºåÂª∫Ë≠∞Ë®Ç‰Ωç„ÄÇ"
            },
            {
                name: "Wattana Panich (ÈÉ≠ÁÇéÊùæ)",
                engName: "Wattana Panich",
                area: "Sukhumvit (Ekkamai)",
                category: "Sukhumvit",
                level: "Bib",
                type: "ÁâõËÇâÈ∫µ",
                mustEat: "ÁáâÁâõËÇâÁ≤øÊ¢ù",
                price: "‡∏ø‡∏ø",
                note: "ÈñÄÂè£ÈÇ£ÈçãÁÖÆ‰∫ÜÂπæÂçÅÂπ¥ÁöÑÈô≥Âπ¥ËÄÅÊπØÊòØÊãõÁâå„ÄÇ"
            },

            // Siam / Pratunam
            {
                name: "Go-Ang (Á¥ÖÂ§ßÂì•Ê∞¥ÈñÄÈõûÈ£Ø)",
                engName: "Go-Ang Kaomunkai Pratunam",
                area: "Pratunam (Ê∞¥ÈñÄ)",
                category: "Siam",
                level: "Bib",
                type: "Êµ∑ÂçóÈõûÈ£Ø",
                mustEat: "ÈõûÊ≤πÈ£Ø, ÁáâÈõûÊπØ",
                price: "‡∏ø",
                note: "Â∫óÂì°Á©øÁ≤âÁ¥ÖËâ≤Âà∂Êúç„ÄÇÂ∞±Âú® Central World ÈôÑËøë„ÄÇ"
            },
            {
                name: "Jeh O Chula (ÈõÖÊ≠ê)",
                engName: "Jeh O Chula",
                area: "Siam (Chula)",
                category: "Siam",
                level: "Bib",
                type: "ÂÆµÂ§úÁÜ±ÁÇí",
                mustEat: "ÂÜ¨Ëî≠ÂäüÂ™ΩÂ™ΩÈ∫µÈçã (Tom Yum Mama)",
                price: "‡∏ø‡∏ø",
                note: "Ê∑±Â§úÊéíÈöäÂêçÂ∫óÔºåÂ™ΩÂ™ΩÈ∫µÊôö‰∏ä11ÈªûÂæåÊâç‰æõÊáâ„ÄÇ"
            },

            // Silom / Sathorn
            {
                name: "Jok Prince (ÁéãÂ≠êÊà≤Èô¢Ë±¨ËÇâÁ≤•)",
                engName: "Jok Prince",
                area: "Bang Rak (Silom)",
                category: "Silom",
                level: "Bib",
                type: "Âª£ÂºèÁ≤•ÂìÅ",
                mustEat: "Ë±¨ËÇâËõãÁ≤• (Pork Congee with Egg)",
                price: "‡∏ø",
                note: "Â∏∂ÊúâÁÑ¶È¶ôÂë≥ÁöÑÁç®ÁâπÁ≤•ÂìÅÔºåÂ∞±Âú® Robinson Bangrak Â∞çÈù¢„ÄÇ"
            },
            {
                name: "Baan Somtum (Sathorn)",
                engName: "Baan Somtum Sathorn",
                area: "Sathorn",
                category: "Silom",
                level: "Bib",
                type: "Ê≥∞ÂåóËèú",
                mustEat: "ÈùíÊú®ÁìúÊ≤ôÊãâ, ÁÇ∏ÈõûÁøÖ",
                price: "‡∏ø‡∏ø",
                note: "Áí∞Â¢ÉËàíÈÅ©ÔºåÂÜ∑Ê∞£Âº∑ÔºåÈÅ©ÂêàÂÆ∂Â∫≠ËÅöÈ§ê„ÄÇ"
            }
        ];

        createApp({
            setup() {
                // State
                const currentTab = ref('itinerary');
                const activeDayIndex = ref(0);
                const activeFoodCategory = ref('ÂÖ®ÂçÄ');
                const showItineraryModal = ref(false);
                const showExpenseModal = ref(false);
                const showFoodModal = ref(false);
                const showSettlementModal = ref(false);
                const showSettings = ref(false);
                const showThaiAddrModal = ref(false);
                const thaiAddrContent = ref('');
                const isEditing = ref(false);
                const editingId = ref(null);

                // Calculator State
                const calcTHB = ref('');
                const calcHKD = ref('');
                const currentRate = ref(4.4);

                // Data
                const savedTrips = JSON.parse(localStorage.getItem('tripDays_v2'));
                const tripDays = ref(savedTrips || defaultItinerary);
                const expenses = ref(JSON.parse(localStorage.getItem('expenses')) || []);
                const members = ref(JSON.parse(localStorage.getItem('members')) || ['Êàë', 'ÂÆ∂‰∫∫A', 'ÂÆ∂‰∫∫B']);
                const newMemberName = ref('');
                
                // Food Data Handling
                const customFoodSpots = ref(JSON.parse(localStorage.getItem('customFoodSpots')) || []);
                const foodSpots = computed(() => [...customFoodSpots.value, ...defaultMichelinData]);

                // Food Categories
                const foodCategories = ['ÂÖ®ÂçÄ', 'Siam', 'Sukhumvit', 'Old Town', 'Silom'];

                // Forms
                const formItinerary = ref({ time: '', title: '', location: '', transport: '', desc: '', thaiAddr: '' });
                const formExpense = ref({ title: '', amount: '', payer: '' });
                const formFood = ref({ name: '', engName: '', category: 'Siam', level: 'Custom', type: '', mustEat: '', price: '‡∏ø', note: '' });

                // Computed
                const currentDayItems = computed(() => {
                    return tripDays.value[activeDayIndex.value].items.sort((a, b) => a.time.localeCompare(b.time));
                });

                const filteredFoodSpots = computed(() => {
                    if (activeFoodCategory.value === 'ÂÖ®ÂçÄ') {
                        return foodSpots.value;
                    }
                    return foodSpots.value.filter(spot => spot.category === activeFoodCategory.value || (activeFoodCategory.value === 'Siam' && spot.category === 'Siam') /* Fallback logic simplified */);
                });

                const totalExpense = computed(() => {
                    return expenses.value.reduce((sum, item) => sum + item.amount, 0);
                });

                const settlements = computed(() => {
                    if (members.value.length === 0) return [];
                    const balances = {};
                    members.value.forEach(m => balances[m] = 0);
                    const splitAmount = totalExpense.value / members.value.length;
                    expenses.value.forEach(exp => {
                        if (balances[exp.payer] !== undefined) balances[exp.payer] += exp.amount;
                    });
                    let debtors = [], creditors = [];
                    for (const m in balances) {
                        const net = balances[m] - splitAmount;
                        if (net < -0.01) debtors.push({ name: m, amount: Math.abs(net) });
                        else if (net > 0.01) creditors.push({ name: m, amount: net });
                    }
                    const result = [];
                    let i = 0, j = 0;
                    while (i < debtors.length && j < creditors.length) {
                        const debtor = debtors[i];
                        const creditor = creditors[j];
                        const amount = Math.min(debtor.amount, creditor.amount);
                        if (amount > 0) result.push({ from: debtor.name, to: creditor.name, amount: amount });
                        debtor.amount -= amount;
                        creditor.amount -= amount;
                        if (debtor.amount < 0.01) i++;
                        if (creditor.amount < 0.01) j++;
                    }
                    return result;
                });

                // Methods
                const updateFromTHB = () => {
                    if (!calcTHB.value) { calcHKD.value = ''; return; }
                    calcHKD.value = (calcTHB.value / currentRate.value).toFixed(2);
                };
                const updateFromHKD = () => {
                    if (!calcHKD.value) { calcTHB.value = ''; return; }
                    calcTHB.value = (calcHKD.value * currentRate.value).toFixed(0);
                };

                const addDay = () => {
                    tripDays.value.push({ id: Date.now(), date: `Day ${tripDays.value.length + 1}`, title: 'Êñ∞ÁöÑ‰∏ÄÂ§©', items: [] });
                    activeDayIndex.value = tripDays.value.length - 1;
                };

                const openItineraryModal = () => {
                    isEditing.value = false;
                    formItinerary.value = { time: '10:00', title: '', location: '', transport: '', desc: '', thaiAddr: '' };
                    showItineraryModal.value = true;
                };

                const editItem = (item) => {
                    isEditing.value = true;
                    editingId.value = item.id;
                    formItinerary.value = { ...item };
                    showItineraryModal.value = true;
                };

                const showThaiAddress = (item) => {
                    thaiAddrContent.value = item.thaiAddr;
                    showThaiAddrModal.value = true;
                };

                const saveItinerary = () => {
                    if (!formItinerary.value.title) return;
                    if (isEditing.value) {
                        const day = tripDays.value[activeDayIndex.value];
                        const idx = day.items.findIndex(i => i.id === editingId.value);
                        if (idx !== -1) day.items[idx] = { ...formItinerary.value, id: editingId.value };
                    } else {
                        tripDays.value[activeDayIndex.value].items.push({ id: Date.now(), ...formItinerary.value });
                    }
                    showItineraryModal.value = false;
                    saveData();
                };

                const deleteItinerary = () => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãË°åÁ®ãÂóéÔºü')) {
                        const day = tripDays.value[activeDayIndex.value];
                        day.items = day.items.filter(i => i.id !== editingId.value);
                        showItineraryModal.value = false;
                        saveData();
                    }
                };

                const openMap = (loc) => {
                    if (!loc) return;
                    const query = encodeURIComponent(loc + ' Bangkok');
                    window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
                };

                const openExpenseModal = () => {
                    formExpense.value = { title: '', amount: '', payer: members.value[0] || '' };
                    showExpenseModal.value = true;
                };

                const saveExpense = () => {
                    if (!formExpense.value.title || !formExpense.value.amount || !formExpense.value.payer) return;
                    expenses.value.unshift({ id: Date.now(), ...formExpense.value });
                    showExpenseModal.value = false;
                    saveData();
                };

                const deleteExpense = (id) => {
                    if (confirm('Âà™Èô§ÈÄôÁ≠ÜÂ∏≥ÁõÆÔºü')) {
                        expenses.value = expenses.value.filter(e => e.id !== id);
                        saveData();
                    }
                };

                // Food Methods
                const openFoodModal = () => {
                    formFood.value = { name: '', engName: '', category: 'Siam', level: 'Custom', type: '', mustEat: '', price: '‡∏ø', note: '' };
                    showFoodModal.value = true;
                };

                const saveFood = () => {
                    if (!formFood.value.name) return;
                    customFoodSpots.value.unshift({ 
                        id: Date.now(), 
                        isCustom: true,
                        area: formFood.value.category, // Map category to area for display
                        ...formFood.value 
                    });
                    showFoodModal.value = false;
                    saveData();
                };

                const deleteCustomFood = (id) => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãÊî∂ËóèÂóéÔºü')) {
                        customFoodSpots.value = customFoodSpots.value.filter(f => f.id !== id);
                        saveData();
                    }
                };

                const getPaidAmount = (person) => {
                    return expenses.value.filter(e => e.payer === person).reduce((sum, e) => sum + e.amount, 0);
                };

                const addMember = () => {
                    if (newMemberName.value && !members.value.includes(newMemberName.value)) {
                        members.value.push(newMemberName.value);
                        newMemberName.value = '';
                        saveData();
                    }
                };

                const removeMember = (index) => {
                    members.value.splice(index, 1);
                    saveData();
                };

                const resetAllData = () => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâË≥áÊñôÁÇ∫È†êË®≠Ë°åÁ®ãÂóéÔºüÊÇ®ÁöÑË®òÂ∏≥Á¥ÄÈåÑÂíåËá™Ë®ÇÈ§êÂª≥‰πüÊúÉË¢´Ê∏ÖÁ©∫„ÄÇ')) {
                        localStorage.clear();
                        location.reload();
                    }
                };

                const saveData = () => {
                    localStorage.setItem('tripDays_v2', JSON.stringify(tripDays.value));
                    localStorage.setItem('expenses', JSON.stringify(expenses.value));
                    localStorage.setItem('members', JSON.stringify(members.value));
                    localStorage.setItem('customFoodSpots', JSON.stringify(customFoodSpots.value));
                };

                watch([tripDays, expenses, members, customFoodSpots], saveData, { deep: true });

                return {
                    currentTab, tripDays, activeDayIndex, currentDayItems, addDay,
                    showItineraryModal, showThaiAddrModal, thaiAddrContent, formItinerary, isEditing, openItineraryModal, editItem, showThaiAddress, saveItinerary, deleteItinerary, openMap,
                    expenses, totalExpense, showExpenseModal, showSettlementModal, formExpense, settlements, openExpenseModal, saveExpense, deleteExpense, getPaidAmount,
                    calcTHB, calcHKD, currentRate, updateFromTHB, updateFromHKD,
                    showSettings, members, newMemberName, addMember, removeMember, resetAllData,
                    // Food Guide<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ÊõºË∞∑ 6 Â§© 5 Â§úË¶™Â≠êÂ∞ä‰∫´‰πãÊóÖ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Ê†∏ÂøÉ‰øÆÂæ©Ôºö‰ΩøÁî® dvh ÂñÆ‰ΩçÈÅ©ÈÖçÁßªÂãïÁ´ØÁÄèË¶ΩÂô®È´òÂ∫¶ */
        body, #app {
            height: 100vh; /* Fallback */
            height: 100dvh; /* Dynamic Viewport Height for Mobile */
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #F3F4F6;
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: none;
        }
        /* Èö±Ëóè Scrollbar ‰ΩÜ‰øùÊåÅÂäüËÉΩ */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        /* Ê®°Êì¨ iOS ÂΩàÊÄßÊªæÂãï */
        .scrolling-touch {
            -webkit-overflow-scrolling: touch;
        }
        .pb-safe {
            padding-bottom: env(safe-area-inset-bottom);
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF8C00', // Ê≥∞ÂúãÊ©ò
                        secondary: '#4B0082', // ÁöáÂÆ§Á¥´
                        bg: '#F3F4F6',
                        michelin: '#BD2333' // Á±≥ËäùËìÆÁ¥Ö
                    }
                }
            }
        }
    </script>
</head>
<body class="overflow-hidden text-gray-800">

    <div id="app" class="flex flex-col relative max-w-md mx-auto bg-white shadow-2xl">
        
        <!-- Header (‰øùÁïôÁ∞°ÊΩîÊ®ôÈ°åÂàóÔºåÁ¢∫‰øùÊìç‰ΩúÂäüËÉΩÂ∏∏Èßê) -->
        <header class="bg-white px-5 pt-10 pb-4 shadow-sm z-10 flex justify-between items-center sticky top-0 shrink-0">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 tracking-tight">
                    <span class="text-primary">Sawadee</span> Bangkok üáπüá≠
                </h1>
                <p class="text-xs text-gray-500 font-medium mt-1">Ë¶™Â≠êÂ∞ä‰∫´‰πãÊóÖ (12/26 - 12/31)</p>
            </div>
            <button @click="showSettings = true" class="text-gray-400 hover:text-primary transition">
                <i class="fa-solid fa-gear text-lg"></i>
            </button>
        </header>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto no-scrollbar scrolling-touch bg-gray-50 p-4 pb-24 relative w-full">
            
            <!-- VIEW: ITINERARY (Ë°åÁ®ã) -->
            <div v-if="currentTab === 'itinerary'" class="space-y-4">
                
                <!-- Vivid Banner Image (ÊîæÂú®ÈÄôË£°ÔºåÂèØ‰ª•Èö®Ë°åÁ®ãÊç≤ÂãïÔºå‰∏ç‰ΩîÊìöÂõ∫ÂÆöÁ©∫Èñì) -->
                <div class="rounded-2xl overflow-hidden shadow-md mb-4 border border-gray-100">
                    <img src="./banner.jpg" alt="Bangkok Trip Banner" class="w-full h-auto object-cover block" onerror="this.style.display='none'">
                </div>

                <!-- Day Selector -->
                <div class="flex space-x-3 overflow-x-auto no-scrollbar pb-2">
                    <button 
                        v-for="(day, index) in tripDays" 
                        :key="index"
                        @click="activeDayIndex = index"
                        class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all transform active:scale-95 shadow-sm flex flex-col items-center min-w-[80px]"
                        :class="activeDayIndex === index ? 'bg-primary text-white shadow-md' : 'bg-white text-gray-500 border border-gray-100'"
                    >
                        <span>Day {{ index + 1 }}</span>
                        <span class="text-[10px] font-normal opacity-80">{{ day.date }}</span>
                    </button>
                    <button @click="addDay" class="flex-shrink-0 px-3 py-2 rounded-full text-sm bg-gray-200 text-gray-600">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                </div>

                <!-- Day Title & Summary -->
                <div class="bg-orange-50 p-4 rounded-xl border border-orange-100 mb-2">
                    <h2 class="font-bold text-lg text-gray-800">{{ tripDays[activeDayIndex].title || 'Ëá™Áî±Ê¥ªÂãï' }}</h2>
                    <p class="text-xs text-gray-500 mt-1" v-if="tripDays[activeDayIndex].note">
                        <i class="fa-solid fa-circle-info mr-1 text-primary"></i>
                        {{ tripDays[activeDayIndex].note }}
                    </p>
                </div>

                <!-- Timeline List -->
                <div class="relative pl-4 space-y-6 mt-4">
                    <!-- Vertical Line -->
                    <div class="absolute left-4 top-2 bottom-2 w-0.5 bg-gray-200"></div>

                    <!-- Items -->
                    <div v-for="item in currentDayItems" :key="item.id" class="relative pl-6 group">
                        <!-- Dot -->
                        <div class="absolute left-[11px] top-1.5 w-3 h-3 bg-white border-2 border-primary rounded-full z-10 group-hover:bg-primary transition-colors"></div>
                        
                        <!-- Card -->
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 active:scale-[0.99] transition-transform">
                            <div class="flex justify-between items-start mb-2">
                                <div class="font-bold text-primary text-lg">{{ item.time }}</div>
                                <div class="flex space-x-1">
                                    <button v-if="item.thaiAddr" @click="showThaiAddress(item)" class="w-8 h-8 rounded-full bg-purple-50 text-purple-600 flex items-center justify-center hover:bg-purple-100" title="È°ØÁ§∫Ê≥∞ÊñáÂú∞ÂùÄÁµ¶Âè∏Ê©üÁúã">
                                        <i class="fa-solid fa-language text-sm"></i>
                                    </button>
                                    <button @click="openMap(item.location)" class="w-8 h-8 rounded-full bg-blue-50 text-blue-500 flex items-center justify-center hover:bg-blue-100">
                                        <i class="fa-solid fa-location-arrow text-sm"></i>
                                    </button>
                                    <button @click="editItem(item)" class="w-8 h-8 rounded-full bg-gray-50 text-gray-400 flex items-center justify-center hover:text-gray-600">
                                        <i class="fa-solid fa-pen text-xs"></i>
                                    </button>
                                </div>
                            </div>
                            <h3 class="font-bold text-gray-800 text-lg leading-tight mb-1">{{ item.title }}</h3>
                            
                            <div class="flex items-center text-gray-500 text-sm mb-2">
                                <i class="fa-solid fa-map-pin mr-1.5 text-xs text-gray-400 w-4 text-center"></i>
                                <span class="truncate">{{ item.location }}</span>
                            </div>

                            <div class="flex flex-wrap gap-2 mt-2">
                                <span v-if="item.transport" class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-600">
                                    <i class="fa-solid fa-van-shuttle mr-1"></i> {{ item.transport }}
                                </span>
                                <span v-if="item.tags" v-for="tag in item.tags" :key="tag" class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-orange-50 text-orange-600">
                                    {{ tag }}
                                </span>
                            </div>

                            <p v-if="item.desc" class="text-sm text-gray-500 mt-3 border-t pt-2 border-gray-50 leading-relaxed">
                                {{ item.desc }}
                            </p>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div v-if="currentDayItems.length === 0" class="text-center py-10 text-gray-400">
                        <i class="fa-regular fa-calendar-xmark text-4xl mb-3 opacity-30"></i>
                        <p>ÈÄôÂ§©ÈÇÑÊ≤íÊúâË°åÁ®ã<br>ÈªûÊìä‰∏ãÊñπÊåâÈàïÊñ∞Â¢û</p>
                    </div>
                </div>
            </div>

            <!-- VIEW: FOOD GUIDE (ÁæéÈ£üÊåáÂçó) -->
            <div v-if="currentTab === 'food'" class="space-y-4">
                
                <!-- Food Category Selector -->
                <div class="flex space-x-2 overflow-x-auto no-scrollbar pb-2">
                    <button 
                        v-for="cat in foodCategories" 
                        :key="cat"
                        @click="activeFoodCategory = cat"
                        class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-bold transition-all border whitespace-nowrap"
                        :class="activeFoodCategory === cat ? 'bg-michelin text-white border-michelin shadow-md' : 'bg-white text-gray-500 border-gray-200'"
                    >
                        {{ cat }}
                    </button>
                </div>

                <!-- Restaurant List -->
                <div class="space-y-4">
                    <div v-for="spot in filteredFoodSpots" :key="spot.id || spot.name" class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden flex flex-col relative">
                        
                        <!-- Delete Button for Custom Spots -->
                        <button v-if="spot.isCustom" @click="deleteCustomFood(spot.id)" class="absolute top-2 right-2 text-gray-300 hover:text-red-500 p-2 z-10">
                            <i class="fa-solid fa-trash text-xs"></i>
                        </button>

                        <!-- Header / Tag -->
                        <div class="flex justify-between items-start p-4 pb-2">
                            <div class="flex flex-col pr-8">
                                <div class="flex items-center gap-2 mb-1 flex-wrap">
                                    <span v-if="spot.level === '1 Star'" class="bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded text-[10px] font-bold border border-yellow-200">
                                        <i class="fa-solid fa-star"></i> Á±≥ËäùËìÆ‰∏ÄÊòü
                                    </span>
                                    <span v-else-if="spot.level === 'Bib'" class="bg-red-50 text-michelin px-2 py-0.5 rounded text-[10px] font-bold border border-red-100">
                                        <i class="fa-solid fa-face-grin-tongue"></i> ÂøÖÊØîÁôªÊé®‰ªã
                                    </span>
                                    <span v-else-if="spot.isCustom" class="bg-blue-50 text-blue-600 px-2 py-0.5 rounded text-[10px] font-bold border border-blue-100">
                                        <i class="fa-solid fa-user-pen"></i> Ëá™Ë®ÇÊî∂Ëóè
                                    </span>
                                    <span v-else class="bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-[10px] font-bold">
                                        Âú®Âú∞Êé®Ëñ¶
                                    </span>
                                    <span class="text-xs text-gray-400 font-medium">{{ spot.price }}</span>
                                </div>
                                <h3 class="font-bold text-gray-900 text-lg">{{ spot.name }}</h3>
                                <p class="text-xs text-gray-500">{{ spot.engName }}</p>
                            </div>
                            <button @click="openMap(spot.engName || spot.name)" class="w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-500 hover:bg-blue-100 shadow-sm shrink-0">
                                <i class="fa-solid fa-location-dot"></i>
                            </button>
                        </div>
                        
                        <!-- Content -->
                        <div class="px-4 pb-4">
                            <div class="flex gap-2 mb-3">
                                <span class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-500">
                                    <i class="fa-solid fa-map-pin text-[10px] mr-1"></i> {{ spot.area }}
                                </span>
                                <span class="text-xs bg-gray-50 px-2 py-1 rounded text-gray-500">
                                    <i class="fa-solid fa-utensils text-[10px] mr-1"></i> {{ spot.type }}
                                </span>
                            </div>
                            <p class="text-sm text-gray-600 leading-relaxed border-t border-gray-50 pt-2" v-if="spot.mustEat">
                                <span class="font-bold text-gray-800">ÂøÖÈªûÔºö</span>{{ spot.mustEat }}
                            </p>
                            <p class="text-xs text-gray-400 mt-2" v-if="spot.note">
                                <i class="fa-solid fa-triangle-exclamation mr-1"></i> {{ spot.note }}
                            </p>
                        </div>
                    </div>

                    <!-- Empty State for filtered -->
                    <div v-if="filteredFoodSpots.length === 0" class="text-center py-10 text-gray-400">
                        <p>ÈÄôÂÄãÂçÄÂüüÊö´ÁÑ°È§êÂª≥Ë≥áÊñô</p>
                    </div>
                </div>
            </div>

            <!-- VIEW: EXPENSE (ÂàÜÂ∏≥) -->
            <div v-if="currentTab === 'expense'" class="space-y-6">
                <!-- Currency Calculator -->
                <div class="bg-white rounded-2xl shadow-sm border border-gray-100 p-5">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-gray-800 flex items-center gap-2">
                            <i class="fa-solid fa-money-bill-transfer text-green-500"></i> 
                            ÂåØÁéáË®àÁÆóÊ©ü
                        </h3>
                        <div class="flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded-lg">
                            <span class="text-gray-400">ÂåØÁéá:</span>
                            <input type="number" v-model.number="currentRate" @input="updateFromHKD" class="w-12 bg-transparent font-bold text-gray-700 text-right outline-none border-b border-gray-300 focus:border-primary" step="0.01">
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-3">
                        <div class="flex-1">
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ê≥∞Èäñ (THB)</label>
                            <div class="relative">
                                <input type="number" v-model.number="calcTHB" @input="updateFromTHB" class="w-full bg-gray-50 rounded-xl px-3 py-2 text-lg font-bold text-gray-800 outline-none focus:ring-2 focus:ring-primary focus:bg-white transition text-center" placeholder="0">
                            </div>
                        </div>
                        <div class="text-gray-300 pt-5">
                            <i class="fa-solid fa-right-left"></i>
                        </div>
                        <div class="flex-1">
                            <label class="block text-xs font-bold text-gray-400 mb-1">Ê∏ØÂπ£ (HKD)</label>
                            <div class="relative">
                                <input type="number" v-model.number="calcHKD" @input="updateFromHKD" class="w-full bg-gray-50 rounded-xl px-3 py-2 text-lg font-bold text-gray-800 outline-none focus:ring-2 focus:ring-primary focus:bg-white transition text-center" placeholder="0">
                            </div>
                        </div>
                    </div>
                    <p class="text-[10px] text-gray-400 text-center mt-2">Ëº∏ÂÖ•‰ªª‰∏ÄÊ¨Ñ‰ΩçËá™ÂãïÊèõÁÆóÔºåÈ†êË®≠ÂåØÁéá 4.4</p>
                </div>

                <!-- Overview Card -->
                <div class="bg-gradient-to-r from-secondary to-purple-600 rounded-2xl p-6 text-white shadow-lg relative overflow-hidden">
                    <div class="absolute right-0 top-0 w-32 h-32 bg-white opacity-5 rounded-full -mr-10 -mt-10 blur-2xl"></div>
                    <div class="relative z-10">
                        <div class="text-purple-200 text-sm font-medium mb-1">Á∏ΩÊîØÂá∫ (Total)</div>
                        <div class="text-4xl font-bold tracking-tight">‡∏ø {{ totalExpense.toLocaleString() }}</div>
                        <div class="mt-4 flex space-x-2 overflow-x-auto no-scrollbar">
                            <div v-for="(person, idx) in members" :key="idx" class="bg-white/20 px-3 py-1 rounded-lg text-xs backdrop-blur-sm whitespace-nowrap">
                                {{ person }}: ‡∏ø {{ getPaidAmount(person).toLocaleString() }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="grid grid-cols-2 gap-3">
                    <button @click="showSettlementModal = true" class="bg-white border border-purple-100 text-secondary py-3 rounded-xl font-bold shadow-sm hover:bg-purple-50 transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-calculator"></i> ÁµêÁÆóÂ†±Ë°®
                    </button>
                    <button @click="openExpenseModal()" class="bg-secondary text-white py-3 rounded-xl font-bold shadow-md shadow-purple-200 active:scale-95 transition flex items-center justify-center gap-2">
                        <i class="fa-solid fa-plus"></i> Êñ∞Â¢ûÊ∂àË≤ª
                    </button>
                </div>

                <!-- Expense List -->
                <div>
                    <h3 class="font-bold text-gray-700 mb-3 px-1">ÊúÄËøëÊ∂àË≤ªË®òÈåÑ</h3>
                    <div class="space-y-3">
                        <div v-for="exp in expenses" :key="exp.id" class="bg-white p-4 rounded-xl shadow-sm flex justify-between items-center border border-gray-50">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-purple-50 text-secondary flex items-center justify-center font-bold text-xs">
                                    {{ exp.payer.charAt(0) }}
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800">{{ exp.title }}</div>
                                    <div class="text-xs text-gray-500">{{ exp.payer }} ÂÖà‰ªò</div>
                                </div>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-gray-900">‡∏ø{{ exp.amount }}</div>
                                <button @click="deleteExpense(exp.id)" class="text-xs text-red-300 hover:text-red-500 mt-1">Âà™Èô§</button>
                            </div>
                        </div>
                        <div v-if="expenses.length === 0" class="text-center py-8 text-gray-400 text-sm">
                            Â∞öÁÑ°Ê∂àË≤ªË®òÈåÑ
                        </div>
                    </div>
                </div>
            </div>

        </main>

        <!-- Floating Action Button -->
        <button 
            v-if="currentTab === 'itinerary'"
            @click="openItineraryModal()"
            class="absolute bottom-24 right-5 w-14 h-14 bg-primary text-white rounded-full shadow-lg shadow-orange-200 flex items-center justify-center text-2xl active:scale-90 transition transform z-20"
        >
            <i class="fa-solid fa-plus"></i>
        </button>

        <button 
            v-if="currentTab === 'food'"
            @click="openFoodModal()"
            class="absolute bottom-24 right-5 w-14 h-14 bg-michelin text-white rounded-full shadow-lg shadow-red-200 flex items-center justify-center text-2xl active:scale-90 transition transform z-20"
        >
            <i class="fa-solid fa-plus"></i>
        </button>

        <!-- Bottom Navigation (Fixed) -->
        <nav class="bg-white border-t border-gray-100 flex justify-around items-center px-2 py-3 pb-safe z-30 shrink-0 sticky bottom-0 w-full">
            <button @click="currentTab = 'itinerary'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'itinerary' ? 'text-primary' : 'text-gray-400'">
                <i class="fa-solid fa-map-location-dot text-xl"></i>
                <span class="text-xs font-medium">Ë°åÁ®ã</span>
            </button>
            <button @click="currentTab = 'food'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'food' ? 'text-michelin' : 'text-gray-400'">
                <i class="fa-solid fa-utensils text-xl"></i>
                <span class="text-xs font-medium">ÁæéÈ£üÊåáÂçó</span>
            </button>
            <button @click="currentTab = 'expense'" class="flex-1 flex flex-col items-center gap-1 p-2 rounded-xl transition" :class="currentTab === 'expense' ? 'text-secondary' : 'text-gray-400'">
                <i class="fa-solid fa-coins text-xl"></i>
                <span class="text-xs font-medium">ÂàÜÂ∏≥/ÂåØÁéá</span>
            </button>
        </nav>


        <!-- MODAL: ADD/EDIT ITINERARY -->
        <div v-if="showItineraryModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">{{ isEditing ? 'Á∑®ËºØË°åÁ®ã' : 'Êñ∞Â¢ûË°åÁ®ã' }}</h3>
                
                <div class="space-y-4 max-h-[60vh] overflow-y-auto no-scrollbar">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÊôÇÈñì</label>
                        <input v-model="formItinerary.time" type="time" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ê¥ªÂãïÂêçÁ®±</label>
                        <input v-model="formItinerary.title" type="text" placeholder="‰æãÔºöÂéªÊ¥ΩÂúñÊ¥ΩÈÄõË°ó" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Âú∞Èªû (Google Maps)</label>
                        <input v-model="formItinerary.location" type="text" placeholder="‰æãÔºöChatuchak Market" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">‰∫§ÈÄöÊñπÂºè</label>
                        <input v-model="formItinerary.transport" type="text" placeholder="‰æãÔºöÂåÖËªä„ÄÅGrab" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂÇôË®ª / Ê≥∞ÊñáÂú∞ÂùÄ</label>
                        <textarea v-model="formItinerary.desc" rows="3" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary text-sm"></textarea>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showItineraryModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button v-if="isEditing" @click="deleteItinerary" class="flex-none px-4 py-3 rounded-xl bg-red-50 text-red-500 font-bold"><i class="fa-solid fa-trash"></i></button>
                    <button @click="saveItinerary" class="flex-1 py-3 rounded-xl bg-primary text-white font-bold shadow-lg shadow-orange-100">ÂÑ≤Â≠ò</button>
                </div>
            </div>
        </div>

        <!-- MODAL: ADD FOOD -->
        <div v-if="showFoodModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">Êñ∞Â¢ûÁæéÈ£üÈ§êÂª≥</h3>
                
                <div class="space-y-4 max-h-[60vh] overflow-y-auto no-scrollbar">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">È§êÂª≥ÂêçÁ®±</label>
                        <input v-model="formFood.name" type="text" placeholder="‰æãÔºöAfter You Dessert" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ëã±Êñá/Ê≥∞ÊñáÂ∫óÂêç (Google MapsÁî®)</label>
                        <input v-model="formFood.engName" type="text" placeholder="‰æãÔºöAfter You Siam Paragon" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">Âú∞ÂçÄ</label>
                            <select v-model="formFood.category" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin appearance-none">
                                <option v-for="cat in foodCategories.filter(c => c !== 'ÂÖ®ÂçÄ')" :key="cat" :value="cat">{{ cat }}</option>
                                <option value="Other">ÂÖ∂‰ªñ</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-gray-500 mb-1">ÂÉπ‰Ωç</label>
                            <select v-model="formFood.price" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin appearance-none">
                                <option value="‡∏ø">‡∏ø (‰æøÂÆú)</option>
                                <option value="‡∏ø‡∏ø">‡∏ø‡∏ø (‰∏≠ÂÉπ)</option>
                                <option value="‡∏ø‡∏ø‡∏ø">‡∏ø‡∏ø‡∏ø (È´òÁ¥ö)</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÊñôÁêÜÈ°ûÂûã</label>
                        <input v-model="formFood.type" type="text" placeholder="‰æãÔºöÁîúÈªû„ÄÅÂíñÂï°Âª≥" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂøÖÂêÉËèúËâ≤</label>
                        <input v-model="formFood.mustEat" type="text" placeholder="‰æãÔºöËäíÊûúÁ≥ØÁ±≥Âà®ÂÜ∞" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÂÇôË®ª</label>
                        <textarea v-model="formFood.note" rows="2" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-michelin text-sm"></textarea>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showFoodModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button @click="saveFood" class="flex-1 py-3 rounded-xl bg-michelin text-white font-bold shadow-lg shadow-red-200">Âä†ÂÖ•Ê∏ÖÂñÆ</button>
                </div>
            </div>
        </div>

        <!-- MODAL: THAI ADDRESS -->
        <div v-if="showThaiAddrModal" class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-6 backdrop-blur-sm">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl text-center">
                <div class="w-16 h-16 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">
                    <i class="fa-solid fa-taxi"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-500 mb-2">Ë´ãÂè∏Ê©üÂéªÈÄôË£°</h3>
                <h2 class="text-2xl font-bold text-gray-900 mb-6 leading-relaxed select-all">{{ thaiAddrContent }}</h2>
                <button @click="showThaiAddrModal = false" class="w-full py-3 rounded-xl bg-gray-800 text-white font-bold">ÈóúÈñâ</button>
            </div>
        </div>

        <!-- MODAL: ADD EXPENSE -->
        <div v-if="showExpenseModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl transform transition-all animate-slide-up">
                <h3 class="text-xl font-bold mb-4">Ë®ò‰∏ÄÁ≠Ü</h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">È†ÖÁõÆ</label>
                        <input v-model="formExpense.title" type="text" placeholder="‰æãÔºöÂçàÈ§ê„ÄÅGrab" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-secondary">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">ÈáëÈ°ç (THB)</label>
                        <input v-model.number="formExpense.amount" type="number" placeholder="0" class="w-full bg-gray-100 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-secondary text-lg font-mono">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-gray-500 mb-1">Ë™∞ÂÖà‰ªòÁöÑÔºü</label>
                        <div class="flex flex-wrap gap-2">
                            <button 
                                v-for="m in members" 
                                :key="m"
                                @click="formExpense.payer = m"
                                class="px-4 py-2 rounded-lg text-sm font-bold border transition"
                                :class="formExpense.payer === m ? 'bg-secondary text-white border-secondary' : 'bg-white text-gray-500 border-gray-200'"
                            >
                                {{ m }}
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button @click="showExpenseModal = false" class="flex-1 py-3 rounded-xl bg-gray-100 font-bold text-gray-600">ÂèñÊ∂à</button>
                    <button @click="saveExpense" class="flex-1 py-3 rounded-xl bg-secondary text-white font-bold shadow-lg shadow-purple-200">Êñ∞Â¢û</button>
                </div>
            </div>
        </div>

        <!-- MODAL: SETTLEMENT REPORT -->
        <div v-if="showSettlementModal" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl max-h-[80vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold">ÁµêÁÆóÂª∫Ë≠∞</h3>
                    <button @click="showSettlementModal = false" class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-500"><i class="fa-solid fa-xmark"></i></button>
                </div>

                <div class="bg-blue-50 p-4 rounded-xl text-sm text-blue-800 mb-4">
                    <p class="font-bold mb-1">Á∏ΩËä±Ë≤ª: ‡∏ø{{ totalExpense }}</p>
                    <p>Âπ≥ÂùáÊØè‰∫∫: ‡∏ø{{ (totalExpense / members.length).toFixed(1) }}</p>
                </div>

                <div v-if="settlements.length > 0" class="space-y-3">
                    <div v-for="(s, idx) in settlements" :key="idx" class="flex items-center justify-between p-3 border border-gray-100 rounded-xl shadow-sm">
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-red-500">{{ s.from }}</span>
                            <i class="fa-solid fa-arrow-right text-gray-300 text-xs"></i>
                            <span class="font-bold text-green-500">{{ s.to }}</span>
                        </div>
                        <span class="font-mono font-bold bg-gray-100 px-2 py-1 rounded">‡∏ø{{ Math.round(s.amount) }}</span>
                    </div>
                    <p class="text-xs text-gray-400 text-center mt-4">Â∑≤‰ΩøÁî®ÊúÄÂ∞èËΩâÂ∏≥Ê¨°Êï∏ÊºîÁÆóÊ≥ïÂÑ™Âåñ</p>
                </div>
                <div v-else class="text-center py-6 text-green-600 font-bold">
                    <i class="fa-solid fa-check-circle text-3xl mb-2"></i>
                    <p>Â∏≥ÁõÆÂ∑≤Âπ≥Ë°°Ôºå‰∏çÈúÄË¶ÅËΩâÂ∏≥ÔºÅ</p>
                </div>
            </div>
        </div>

        <!-- MODAL: SETTINGS (MEMBERS) -->
        <div v-if="showSettings" class="fixed inset-0 bg-black/50 z-50 flex items-end sm:items-center justify-center backdrop-blur-sm p-4">
            <div class="bg-white w-full max-w-sm rounded-3xl p-6 shadow-2xl">
                <h3 class="text-xl font-bold mb-4">Ë®≠ÂÆö</h3>
                
                <div class="mb-4">
                    <label class="block text-xs font-bold text-gray-500 mb-2">ÊóÖ‰º¥ÁÆ°ÁêÜ</label>
                    <div class="flex gap-2 mb-2">
                        <input v-model="newMemberName" type="text" placeholder="Ëº∏ÂÖ•ÂêçÂ≠ó" class="flex-1 bg-gray-100 rounded-xl px-4 py-2 outline-none">
                        <button @click="addMember" class="bg-gray-800 text-white px-4 rounded-xl font-bold">+</button>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-3">
                        <div v-for="(m, idx) in members" :key="idx" class="bg-gray-100 px-3 py-1 rounded-full text-sm flex items-center gap-2">
                            {{ m }}
                            <button @click="removeMember(idx)" class="text-gray-400 hover:text-red-500" v-if="members.length > 1">√ó</button>
                        </div>
                    </div>
                </div>

                <div class="pt-4 border-t">
                    <button @click="resetAllData" class="w-full py-3 rounded-xl border border-red-200 text-red-500 font-bold mb-2">ÈÇÑÂéüÈ†êË®≠Ë°åÁ®ã (ÈáçÁΩÆ)</button>
                    <button @click="showSettings = false" class="w-full py-3 rounded-xl bg-gray-800 text-white font-bold">ÂÆåÊàê</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        const { createApp, ref, computed, onMounted, watch } = Vue;

        const defaultItinerary = [
            { 
                id: 1, 
                date: '12/26 (‰∫î)',
                title: 'ÂïüÁ®ãÊõºË∞∑„ÉªÂàùË¶ãÊ≥∞Âë≥', 
                note: 'Âª∫Ë≠∞ÔºöÊ©üÂ†¥Âà∞È£ØÂ∫óÂåÖËªäÊúÄËàíÈÅ©',
                items: [
                    { id: 101, time: '12:05', title: 'ÊäµÈÅî BKK Ê©üÂ†¥', location: 'Suvarnabhumi Airport', desc: 'È†òÂÆåË°åÊùéÂæåÔºåÂâçÂæÄÈ†êÂÆöÂ•ΩÁöÑÂ∞àËªäÊé•Ê©üÈªûÈõÜÂêà„ÄÇ', transport: 'ÂåÖËªä/Êé•ÈÄÅ' },
                    { id: 102, time: '14:00', title: 'È£ØÂ∫ó Check-in & ‰ºëÊÅØ', location: 'Centre Point Hotel Sukhumvit 10', thaiAddr: '39 ‡∏ã‡∏≠‡∏¢ ‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó 10 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', desc: 'ËÆìÈï∑Ëº©Â∞èÂ≠©ÂÖà‰ºëÊÅØÔºåÊï¥ÁêÜË°åÊùé„ÄÇ', tags: ['‰ΩèÂÆø'] },
                    { id: 103, time: '15:30', title: 'Chef Ple ËäíÊûúÁ≥ØÁ±≥È£Ø', location: 'Chef Ple Thai Mango Sticky Rice', desc: 'Âú® Times Square Building ÊóÅ„ÄÇÂèØÂ§ñÂ∏∂ÂõûÈ£ØÂ∫óÂêÉ„ÄÇ', transport: 'Ê≠•Ë°å/TukTuk' },
                    { id: 104, time: '17:30', title: 'EmSphere ÂïÜÂ†¥ÊôöÈ§ê', location: 'EmSphere', thaiAddr: '628 ‡∏ñ‡∏ô‡∏ô‡∏™‡∏∏‡∏Ç‡∏∏‡∏°‡∏ß‡∏¥‡∏ó ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡∏±‡∏ô ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡πÄ‡∏ï‡∏¢', desc: 'È§êÂª≥ÔºöKub Kao Kub Pla (ÂêÉÈ£ØÂêÉÈ≠ö)„ÄÇÁí∞Â¢ÉËàíÈÅ©ÔºåÂè£Âë≥ÈÅ©ÂêàÂÖ®ÂÆ∂„ÄÇ', transport: 'Grab/ÂåÖËªä', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 2, 
                date: '12/27 (ÂÖ≠)',
                title: 'Ê≥∞ÊúçÁ©øË∂ä„ÉªÊ≤≥ÁïîÁõõÂÆ¥', 
                note: 'ÈáçÈªûÊó•ÔºÅÊ≥®ÊÑèÈï∑Ëº©È´îÂäõÔºåÈÑ≠ÁéãÂªüÊ®ìÊ¢ØÈô°Â≥≠„ÄÇ',
                items: [
                    { id: 201, time: '09:30', title: 'ÈÑ≠ÁéãÂªüÊ≥∞ÊúçÈ´îÈ©ó', location: 'Wat Arun', thaiAddr: '158 ‡∏ñ‡∏ô‡∏ô‡∏ß‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ß‡∏±‡∏î‡∏≠‡∏£‡∏∏‡∏ì ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Å‡∏≠‡∏Å‡πÉ‡∏´‡∏ç‡πà', desc: 'Vision Thai Studio ÊèõË£ù„ÄÇÈï∑Ëº©ËàáÂπºÁ´•Âª∫Ë≠∞Âú®Âπ≥Èù¢Â∫≠ÂúíÊãçÁÖßÂç≥ÂèØÔºåÊ≥®ÊÑèÂÆâÂÖ®„ÄÇ', transport: 'ÂåÖËªä' },
                    { id: 202, time: '12:30', title: 'ICONSIAM ÂçàÈ§ê', location: 'ICONSIAM', thaiAddr: '299 ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏ô‡∏Ñ‡∏£ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏Ñ‡∏•‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÑ‡∏ó‡∏£ ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡∏™‡∏≤‡∏ô', desc: 'Âª∫Ë≠∞Ëá≥È´òÊ®ìÂ±§È§êÂª≥ÔºàÂ¶Ç Nara Thai CuisineÔºâ„ÄÇÈ§êÂæåÂèØÈÄõ SookSiam ÂÆ§ÂÖßÊ∞¥‰∏äÂ∏ÇÂ†¥„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 203, time: '15:00', title: '‰æèÁæÖÁ¥ÄÂ±ïË¶Ω', location: 'ICONSIAM Jurassic World', desc: 'Âú®ÂÜ∑Ê∞£ÊàøÂÖßÈ´îÈ©óÊ≤âÊµ∏ÂºèÊÅêÈæç‰∏ñÁïåÔºåÂ∞èÊúãÂèãÁöÑÊúÄÊÑõ„ÄÇ', tags: ['Â±ïË¶Ω'] },
                    { id: 204, time: '17:30', title: 'Asiatique Ê≤≥Êø±Â§úÂ∏ÇÊôöÈ§ê', location: 'Asiatique The Riverfront', thaiAddr: '2194 ‡∏ñ‡∏ô‡∏ô‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏Å‡∏£‡∏∏‡∏á ‡πÅ‡∏Ç‡∏ß‡∏á‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡∏¢‡∏≤‡πÑ‡∏Å‡∏£ ‡πÄ‡∏Ç‡∏ï‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≠‡πÅ‡∏´‡∏•‡∏°', desc: 'ÊôöÈ§êÊé®Ëñ¶ÔºöKo Dang Talay (Êµ∑ÈÆÆÂÄâÂ∫´)„ÄÇÁí∞Â¢ÉÂØ¨ÊïûÈÅ©ÂêàÂ§ßÂÆ∂Â∫≠„ÄÇ', transport: 'ÂåÖËªä/Grab', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 3, 
                date: '12/28 (Êó•)',
                title: 'ÈÄ±Êú´Ê∑òÂØ∂„ÉªÂú®Âú∞Èá£Ëù¶Ê®Ç', 
                note: 'ÂàÜÁµÑË°åÂãïÔºöÈï∑Ëº©ÂπºÁ´•ÂêπÂÜ∑Ê∞£ÔºåÊé°Ë≥ºÁµÑÈÄõÂ∏ÇÈõÜ„ÄÇ',
                items: [
                    { id: 301, time: '10:00', title: 'Ê¥ΩÂúñÊ¥ΩÂ∏ÇÈõÜ / Mixt ÂïÜÂ†¥', location: 'Mixt Chatuchak', thaiAddr: '8 Kamphaeng Phet 3 Rd, Chatuchak', desc: 'Èï∑Ëº©ÂπºÁ´•Âú® Mixt ÂïÜÂ†¥ÂêπÂÜ∑Ê∞£‰ºëÊÅØ„ÄÇÊé°Ë≥ºÁµÑÂéªÊà∂Â§ñÂ∏ÇÈõÜÂ∞ãÂØ∂„ÄÇÂçàÈ§êÂú®ÂïÜÂ†¥ÂÖßËß£Ê±∫„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 302, time: '15:30', title: 'È£ØÂ∫óÊ≥≥Ê±† / Ë∂≥ÈÉ®ÊåâÊë©', location: 'Centre Point Hotel Sukhumvit 10', desc: 'ÂçàÂæåÈÅøÊöë„ÄÇÂ∞èÊúãÂèãÁé©Ê∞¥ÔºåÂ§ß‰∫∫Âú®ÈôÑËøëÊâæÊåâÊë©Â∫óÊîæÈ¨Ü„ÄÇ', transport: 'ÂõûÈ£ØÂ∫ó' },
                    { id: 303, time: '17:30', title: 'Èá£Ëù¶È´îÈ©óÊôöÈ§ê', location: 'Bor Tok Kung Charoen Nakhon 16', thaiAddr: '‡∏ö‡πà‡∏≠‡∏ï‡∏Å‡∏Å‡∏∏‡πâ‡∏á‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡∏ô‡∏Ñ‡∏£ 16 (Soi Charoen Nakhon 16)', desc: 'È´îÈ©óÂú®Âú∞Â®õÊ®ÇÔºÅÂª∫Ë≠∞ÂÖàÈªû‰∏Ä‰∫õÁÜ±ÁÇí‰ª•ÂÖçÁ≠âÂ§™‰πÖÈ§ìËÇöÂ≠ê„ÄÇ', transport: 'ÂåÖËªä/Grab', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 4, 
                date: '12/29 (‰∏Ä)',
                title: 'ÈáéÁîüÂãïÁâ©Âúí„ÉªË¶™Â≠êÂêåÊ®Ç', 
                note: 'Âº∑ÁÉàÂª∫Ë≠∞‰ªäÊó•ÂÖ®Êó•ÂåÖËªäÔºåÊñπ‰æø‰ºëÊÅØËàáÁΩÆÁâ©„ÄÇ',
                items: [
                    { id: 401, time: '08:30', title: 'Safari World ÈáéÁîüÂãïÁâ©Âúí', location: 'Safari World', thaiAddr: '99 ‡∏ñ‡∏ô‡∏ô‡∏õ‡∏±‡∏ç‡∏ç‡∏≤‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏≤ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏™‡∏≤‡∏°‡∏ß‡∏≤‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡∏ï‡∏Å ‡πÄ‡∏Ç‡∏ï‡∏Ñ‡∏•‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏ß‡∏≤', desc: '‰∏äÂçàÊê≠ËªäÈÅäÈáéÁîüÂãïÁâ©ÂçÄ (Safari Park)Ôºå‰∏ãÂçàÊ≠•Ë°åÊµ∑Ê¥ãÂÖ¨ÂúíÂçÄ (Marine Park)„ÄÇÂøÖÂéªÈï∑È†∏ÈπøÈ§µÈ£ü‰∫≠„ÄÇ', transport: 'ÂåÖËªä', tags: ['ÂÖ®Êó•ÈÅä'] },
                    { id: 402, time: '18:30', title: 'Central World ÊôöÈ§ê', location: 'Central World', thaiAddr: '999/9 ‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏ó‡∏µ‡πà ‡πë ‡πÅ‡∏Ç‡∏ß‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'ÊôöÈ§êÔºöSavoey Seafood (‰∏äÂë≥Ê≥∞È§êÈ§®)Ôºå2Ê®ì Groove ÂçÄ„ÄÇÊé®Ëñ¶ÂíñÂì©ËûÉËüπ„ÄÇ', transport: 'ÂåÖËªäÂõûÂ∏ÇÂçÄ', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 5, 
                date: '12/30 (‰∫å)',
                title: '‰º¥ÊâãÁ¶Æ„ÉªÊµ∑Ê¥ãÊé¢Á¥¢„ÉªÂ§úÂ∏Ç', 
                note: 'Âà©Áî® Skywalk ÈÄ£ÈÄöÈÅìÁßªÂãïÔºåËàíÈÅ©Ê∂ºÁàΩ„ÄÇ',
                items: [
                    { id: 501, time: '11:00', title: 'Big C Êé°Ë≤∑‰º¥ÊâãÁ¶Æ', location: 'Big C Supercenter Rajdamri', thaiAddr: '97/11 ‡∏ñ‡∏ô‡∏ô‡∏£‡∏≤‡∏ä‡∏î‡∏≥‡∏£‡∏¥ ‡πÅ‡∏Ç‡∏ß‡∏á‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ ‡πÄ‡∏Ç‡∏ï‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'Â∞±Âú® Central World Â∞çÈù¢„ÄÇË≤∑ÂÆåÂèØÂØÑÊîæÊàñË´ãÂè∏Ê©üËºâÂõû„ÄÇ', transport: 'ÂåÖËªä/Grab' },
                    { id: 502, time: '13:00', title: 'ÂçàÈ§êÔºöThong Smith ËàπÈ∫µ', location: 'Central World', desc: '‰ΩçÊñº 3 Ê®ì Beacon ÂçÄ„ÄÇÈ´òÁ¥öËàπÈ∫µÔºåËæ£Â∫¶ÂèØË™øÊï¥„ÄÇ', tags: ['ÂçàÈ§ê'] },
                    { id: 503, time: '14:30', title: 'Sea Life Ê∞¥ÊóèÈ§® / ‰∏ãÂçàËå∂', location: 'Siam Paragon', thaiAddr: '991 ‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏°‡∏ó‡∏µ‡πà 1 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ß‡∏±‡∏ô', desc: 'Ë¶™Â≠êÁµÑÔºöÂéª B1-B2 Ê∞¥ÊóèÈ§®„ÄÇ‰ºëÈñíÁµÑÔºöÂú®ÁôæË≤®Âñù‰∏ãÂçàËå∂„ÄÇÂæû Central World Ëµ∞ Skywalk ÈÅé‰æÜ„ÄÇ', transport: 'Ê≠•Ë°å Skywalk' },
                    { id: 504, time: '18:00', title: 'Âñ¨Âæ∑Â§úÂ∏ÇÊôöÈ§ê', location: 'Jodd Fairs Rama 9', thaiAddr: '‡∏ñ‡∏ô‡∏ô‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏° 9 ‡πÅ‡∏Ç‡∏ß‡∏á‡∏´‡πâ‡∏ß‡∏¢‡∏Ç‡∏ß‡∏≤‡∏á', desc: 'ÊôöÈ§êÂêÉÁÅ´Â±±ÊéíÈ™®„ÄÇÈï∑Ëº©Ëã•ÊÄïÁÜ±ÂèØÂéªÊóÅÈÇä Central Rama 9 ÂïÜÂ†¥‰ºëÊÅØ„ÄÇ', transport: 'Grab/ÂåÖËªä', tags: ['ÊôöÈ§ê'] }
                ]
            },
            { 
                id: 6, 
                date: '12/31 (‰∏â)',
                title: 'ÊªøËºâËÄåÊ≠∏„ÉªÂÜçÊúÉÊõºË∞∑', 
                note: 'Ê™¢Êü•Êà∞Âà©ÂìÅÔºåÊ∫ñÂÇôÂâçÂæÄÊ©üÂ†¥„ÄÇ',
                items: [
                    { id: 601, time: '09:30', title: 'ÊÇ†ÈñíÊó©È§ê & Êî∂Êãæ', location: 'Centre Point Hotel Sukhumvit 10', desc: '‰∫´ÂèóÊúÄÂæåÁöÑÈ£ØÂ∫óÊôÇÂÖâ„ÄÇ' },
                    { id: 602, time: '11:00', title: 'ÂâçÂæÄÊ©üÂ†¥ (BKK)', location: 'Suvarnabhumi Airport', desc: 'Êê≠‰πòÂ∞àËªäÈÄÅÊ©ü„ÄÇËªäÁ®ãÁ¥Ñ 45-60 ÂàÜÈêò„ÄÇ', transport: 'ÂåÖËªäÈÄÅÊ©ü' },
                    { id: 603, time: '13:45', title: 'Ëà™Áè≠Ëµ∑È£õ (EK384)', location: 'Suvarnabhumi Airport', desc: '13:45 BKK -> 17:40 HKG', tags: ['È£õÊ©ü'] }
                ]
            }
        ];

        // Michelin Guide Data (Static)
        const defaultMichelinData = [
            // Old Town / Chinatown
            {
                name: "Jay Fai (Áó£Âßê)",
                engName: "Raan Jay Fai",
                area: "ËàäÂüéÂçÄ (Old Town)",
                category: "Old Town",
                level: "1 Star",
                type: "Ë°óÈ†≠ÁÜ±ÁÇí",
                mustEat: "ÈªÉÈáëËüπËÇâËõãÊç≤ (Crab Omelette), ÈÜâÊº¢È∫µ",
                price: "‡∏ø‡∏ø‡∏ø‡∏ø",
                note: "ÂÉπÊ†ºÊòÇË≤¥ÔºåÈúÄÊéíÈöäÊï∏Â∞èÊôÇÊàñÈ†êÁ¥Ñ„ÄÇÂîØ‰∏ÄÁ±≥ËäùËìÆÊòüÁ¥öË∑ØÈÇäÊî§„ÄÇ"
            },
            {
                name: "Thipsamai (È¨ºÈñÄÊ≥∞ÂºèÁÇíÈ∫µ)",
                engName: "Thipsamai Pad Thai Pratoopee",
                area: "ËàäÂüéÂçÄ (Old Town)",
                category: "Old Town",
                level: "Bib",
                type: "ÁÇíÊ≤≥Á≤â",
                mustEat: "ËõãÂåÖÊ≥∞ÂºèÁÇíÊ≤≥ (Superb Pad Thai)",
                price: "‡∏ø‡∏ø",
                note: "Â∞±Âú® Jay Fai ÊóÅÈÇäÔºåÊéíÈöä‰∫∫ÊΩÆÂ§ö‰ΩÜÊµÅÂãïÂø´„ÄÇÊ©òÂ≠êÊ±ÅÂøÖÈªûÔºÅ"
            },
            {
                name: "Nai Mong Hoi Thod (ÂÖßËíôË†îÁÖé)",
                engName: "Nai Mong Hoi Thod",
                area: "Âîê‰∫∫Ë°ó (Chinatown)",
                category: "Old Town",
                level: "Bib",
                type: "Ëöµ‰ªîÁÖé",
                mustEat: "ËÑÜÁöÆËöµ‰ªîÁÖé (Crispy Oyster Omelette)",
                price: "‡∏ø‡∏ø",
                note: "‰ΩçÊñºÂîê‰∫∫Ë°óÈÇäÁ∑£ÔºåÂè£ÊÑüÊ•µÂ∫¶ÈÖ•ËÑÜ„ÄÇ"
            },
            {
                name: "Lim Lao Ngow (ÊûóËÄÅ‰∫îÈ≠ö‰∏∏)",
                engName: "Lim Lao Ngow Fishball Noodle",
                area: "Âîê‰∫∫Ë°ó (Chinatown)",
                category: "Old Town",
                level: "Bib",
                type: "È≠ö‰∏∏È∫µ",
                mustEat: "‰πæÊãåÈ≠ö‰∏∏È∫µ",
                price: "‡∏ø",
                note: "ÁôæÂπ¥ËÄÅÂ∫óÔºåÈ≠ö‰∏∏QÂΩàÁÑ°Á≤âÊÑü„ÄÇÊôö‰∏äÊâçÈñã„ÄÇ"
            },
            
            // Sukhumvit
            {
                name: "Rung Rueang (Ê¶ÆÊ≥∞Á±≥Á≤âÊπØ)",
                engName: "Rung Rueang Pork Noodle",
                area: "Sukhumvit (Phrom Phong)",
                category: "Sukhumvit",
                level: "Bib",
                type: "Ë±¨ËÇâÈ∫µ",
                mustEat: "ÈÖ∏Ëæ£Ë±¨ËÇâÁ±≥Á≤âÊπØ (Tom Yum Pork Noodles)",
                price: "‡∏ø",
                note: "‰ΩçÊñº Soi 26ÔºåÊúâÂÖ©ÈñìÂ∫óÈù¢Áõ∏ÈÑ∞ÔºåÈÉΩÊòØË¶™ÊàöÈñãÁöÑÔºåÂë≥ÈÅìÂ∑Æ‰∏çÂ§ö„ÄÇ"
            },
            {
                name: "Here Hai (Êµ∑Êµ∑)",
                engName: "Here Hai Restaurant",
                area: "Sukhumvit (Ekkamai)",
                category: "Sukhumvit",
                level: "Bib",
                type: "Êµ∑ÈÆÆÁÜ±ÁÇí",
                mustEat: "ËüπËÇâÁÇíÈ£Ø (Insane Crab Fried Rice)",
                price: "‡∏ø‡∏ø‡∏ø",
                note: "ËüπËÇâ‰ªΩÈáèÈ©ö‰∫∫ÔºåÂª∫Ë≠∞Ë®Ç‰Ωç„ÄÇ"
            },
            {
                name: "Wattana Panich (ÈÉ≠ÁÇéÊùæ)",
                engName: "Wattana Panich",
                area: "Sukhumvit (Ekkamai)",
                category: "Sukhumvit",
                level: "Bib",
                type: "ÁâõËÇâÈ∫µ",
                mustEat: "ÁáâÁâõËÇâÁ≤øÊ¢ù",
                price: "‡∏ø‡∏ø",
                note: "ÈñÄÂè£ÈÇ£ÈçãÁÖÆ‰∫ÜÂπæÂçÅÂπ¥ÁöÑÈô≥Âπ¥ËÄÅÊπØÊòØÊãõÁâå„ÄÇ"
            },

            // Siam / Pratunam
            {
                name: "Go-Ang (Á¥ÖÂ§ßÂì•Ê∞¥ÈñÄÈõûÈ£Ø)",
                engName: "Go-Ang Kaomunkai Pratunam",
                area: "Pratunam (Ê∞¥ÈñÄ)",
                category: "Siam",
                level: "Bib",
                type: "Êµ∑ÂçóÈõûÈ£Ø",
                mustEat: "ÈõûÊ≤πÈ£Ø, ÁáâÈõûÊπØ",
                price: "‡∏ø",
                note: "Â∫óÂì°Á©øÁ≤âÁ¥ÖËâ≤Âà∂Êúç„ÄÇÂ∞±Âú® Central World ÈôÑËøë„ÄÇ"
            },
            {
                name: "Jeh O Chula (ÈõÖÊ≠ê)",
                engName: "Jeh O Chula",
                area: "Siam (Chula)",
                category: "Siam",
                level: "Bib",
                type: "ÂÆµÂ§úÁÜ±ÁÇí",
                mustEat: "ÂÜ¨Ëî≠ÂäüÂ™ΩÂ™ΩÈ∫µÈçã (Tom Yum Mama)",
                price: "‡∏ø‡∏ø",
                note: "Ê∑±Â§úÊéíÈöäÂêçÂ∫óÔºåÂ™ΩÂ™ΩÈ∫µÊôö‰∏ä11ÈªûÂæåÊâç‰æõÊáâ„ÄÇ"
            },

            // Silom / Sathorn
            {
                name: "Jok Prince (ÁéãÂ≠êÊà≤Èô¢Ë±¨ËÇâÁ≤•)",
                engName: "Jok Prince",
                area: "Bang Rak (Silom)",
                category: "Silom",
                level: "Bib",
                type: "Âª£ÂºèÁ≤•ÂìÅ",
                mustEat: "Ë±¨ËÇâËõãÁ≤• (Pork Congee with Egg)",
                price: "‡∏ø",
                note: "Â∏∂ÊúâÁÑ¶È¶ôÂë≥ÁöÑÁç®ÁâπÁ≤•ÂìÅÔºåÂ∞±Âú® Robinson Bangrak Â∞çÈù¢„ÄÇ"
            },
            {
                name: "Baan Somtum (Sathorn)",
                engName: "Baan Somtum Sathorn",
                area: "Sathorn",
                category: "Silom",
                level: "Bib",
                type: "Ê≥∞ÂåóËèú",
                mustEat: "ÈùíÊú®ÁìúÊ≤ôÊãâ, ÁÇ∏ÈõûÁøÖ",
                price: "‡∏ø‡∏ø",
                note: "Áí∞Â¢ÉËàíÈÅ©ÔºåÂÜ∑Ê∞£Âº∑ÔºåÈÅ©ÂêàÂÆ∂Â∫≠ËÅöÈ§ê„ÄÇ"
            }
        ];

        createApp({
            setup() {
                // State
                const currentTab = ref('itinerary');
                const activeDayIndex = ref(0);
                const activeFoodCategory = ref('ÂÖ®ÂçÄ');
                const showItineraryModal = ref(false);
                const showExpenseModal = ref(false);
                const showFoodModal = ref(false);
                const showSettlementModal = ref(false);
                const showSettings = ref(false);
                const showThaiAddrModal = ref(false);
                const thaiAddrContent = ref('');
                const isEditing = ref(false);
                const editingId = ref(null);

                // Calculator State
                const calcTHB = ref('');
                const calcHKD = ref('');
                const currentRate = ref(4.4);

                // Data
                const savedTrips = JSON.parse(localStorage.getItem('tripDays_v2'));
                const tripDays = ref(savedTrips || defaultItinerary);
                const expenses = ref(JSON.parse(localStorage.getItem('expenses')) || []);
                const members = ref(JSON.parse(localStorage.getItem('members')) || ['Êàë', 'ÂÆ∂‰∫∫A', 'ÂÆ∂‰∫∫B']);
                const newMemberName = ref('');
                
                // Food Data Handling
                const customFoodSpots = ref(JSON.parse(localStorage.getItem('customFoodSpots')) || []);
                const foodSpots = computed(() => [...customFoodSpots.value, ...defaultMichelinData]);

                // Food Categories
                const foodCategories = ['ÂÖ®ÂçÄ', 'Siam', 'Sukhumvit', 'Old Town', 'Silom'];

                // Forms
                const formItinerary = ref({ time: '', title: '', location: '', transport: '', desc: '', thaiAddr: '' });
                const formExpense = ref({ title: '', amount: '', payer: '' });
                const formFood = ref({ name: '', engName: '', category: 'Siam', level: 'Custom', type: '', mustEat: '', price: '‡∏ø', note: '' });

                // Computed
                const currentDayItems = computed(() => {
                    return tripDays.value[activeDayIndex.value].items.sort((a, b) => a.time.localeCompare(b.time));
                });

                const filteredFoodSpots = computed(() => {
                    if (activeFoodCategory.value === 'ÂÖ®ÂçÄ') {
                        return foodSpots.value;
                    }
                    return foodSpots.value.filter(spot => spot.category === activeFoodCategory.value || (activeFoodCategory.value === 'Siam' && spot.category === 'Siam') /* Fallback logic simplified */);
                });

                const totalExpense = computed(() => {
                    return expenses.value.reduce((sum, item) => sum + item.amount, 0);
                });

                const settlements = computed(() => {
                    if (members.value.length === 0) return [];
                    const balances = {};
                    members.value.forEach(m => balances[m] = 0);
                    const splitAmount = totalExpense.value / members.value.length;
                    expenses.value.forEach(exp => {
                        if (balances[exp.payer] !== undefined) balances[exp.payer] += exp.amount;
                    });
                    let debtors = [], creditors = [];
                    for (const m in balances) {
                        const net = balances[m] - splitAmount;
                        if (net < -0.01) debtors.push({ name: m, amount: Math.abs(net) });
                        else if (net > 0.01) creditors.push({ name: m, amount: net });
                    }
                    const result = [];
                    let i = 0, j = 0;
                    while (i < debtors.length && j < creditors.length) {
                        const debtor = debtors[i];
                        const creditor = creditors[j];
                        const amount = Math.min(debtor.amount, creditor.amount);
                        if (amount > 0) result.push({ from: debtor.name, to: creditor.name, amount: amount });
                        debtor.amount -= amount;
                        creditor.amount -= amount;
                        if (debtor.amount < 0.01) i++;
                        if (creditor.amount < 0.01) j++;
                    }
                    return result;
                });

                // Methods
                const updateFromTHB = () => {
                    if (!calcTHB.value) { calcHKD.value = ''; return; }
                    calcHKD.value = (calcTHB.value / currentRate.value).toFixed(2);
                };
                const updateFromHKD = () => {
                    if (!calcHKD.value) { calcTHB.value = ''; return; }
                    calcTHB.value = (calcHKD.value * currentRate.value).toFixed(0);
                };

                const addDay = () => {
                    tripDays.value.push({ id: Date.now(), date: `Day ${tripDays.value.length + 1}`, title: 'Êñ∞ÁöÑ‰∏ÄÂ§©', items: [] });
                    activeDayIndex.value = tripDays.value.length - 1;
                };

                const openItineraryModal = () => {
                    isEditing.value = false;
                    formItinerary.value = { time: '10:00', title: '', location: '', transport: '', desc: '', thaiAddr: '' };
                    showItineraryModal.value = true;
                };

                const editItem = (item) => {
                    isEditing.value = true;
                    editingId.value = item.id;
                    formItinerary.value = { ...item };
                    showItineraryModal.value = true;
                };

                const showThaiAddress = (item) => {
                    thaiAddrContent.value = item.thaiAddr;
                    showThaiAddrModal.value = true;
                };

                const saveItinerary = () => {
                    if (!formItinerary.value.title) return;
                    if (isEditing.value) {
                        const day = tripDays.value[activeDayIndex.value];
                        const idx = day.items.findIndex(i => i.id === editingId.value);
                        if (idx !== -1) day.items[idx] = { ...formItinerary.value, id: editingId.value };
                    } else {
                        tripDays.value[activeDayIndex.value].items.push({ id: Date.now(), ...formItinerary.value });
                    }
                    showItineraryModal.value = false;
                    saveData();
                };

                const deleteItinerary = () => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãË°åÁ®ãÂóéÔºü')) {
                        const day = tripDays.value[activeDayIndex.value];
                        day.items = day.items.filter(i => i.id !== editingId.value);
                        showItineraryModal.value = false;
                        saveData();
                    }
                };

                const openMap = (loc) => {
                    if (!loc) return;
                    const query = encodeURIComponent(loc + ' Bangkok');
                    window.open(`https://www.google.com/maps/search/?api=1&query=${query}`, '_blank');
                };

                const openExpenseModal = () => {
                    formExpense.value = { title: '', amount: '', payer: members.value[0] || '' };
                    showExpenseModal.value = true;
                };

                const saveExpense = () => {
                    if (!formExpense.value.title || !formExpense.value.amount || !formExpense.value.payer) return;
                    expenses.value.unshift({ id: Date.now(), ...formExpense.value });
                    showExpenseModal.value = false;
                    saveData();
                };

                const deleteExpense = (id) => {
                    if (confirm('Âà™Èô§ÈÄôÁ≠ÜÂ∏≥ÁõÆÔºü')) {
                        expenses.value = expenses.value.filter(e => e.id !== id);
                        saveData();
                    }
                };

                // Food Methods
                const openFoodModal = () => {
                    formFood.value = { name: '', engName: '', category: 'Siam', level: 'Custom', type: '', mustEat: '', price: '‡∏ø', note: '' };
                    showFoodModal.value = true;
                };

                const saveFood = () => {
                    if (!formFood.value.name) return;
                    customFoodSpots.value.unshift({ 
                        id: Date.now(), 
                        isCustom: true,
                        area: formFood.value.category, // Map category to area for display
                        ...formFood.value 
                    });
                    showFoodModal.value = false;
                    saveData();
                };

                const deleteCustomFood = (id) => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãÊî∂ËóèÂóéÔºü')) {
                        customFoodSpots.value = customFoodSpots.value.filter(f => f.id !== id);
                        saveData();
                    }
                };

                const getPaidAmount = (person) => {
                    return expenses.value.filter(e => e.payer === person).reduce((sum, e) => sum + e.amount, 0);
                };

                const addMember = () => {
                    if (newMemberName.value && !members.value.includes(newMemberName.value)) {
                        members.value.push(newMemberName.value);
                        newMemberName.value = '';
                        saveData();
                    }
                };

                const removeMember = (index) => {
                    members.value.splice(index, 1);
                    saveData();
                };

                const resetAllData = () => {
                    if (confirm('Á¢∫ÂÆöË¶ÅÈáçÁΩÆÊâÄÊúâË≥áÊñôÁÇ∫È†êË®≠Ë°åÁ®ãÂóéÔºüÊÇ®ÁöÑË®òÂ∏≥Á¥ÄÈåÑÂíåËá™Ë®ÇÈ§êÂª≥‰πüÊúÉË¢´Ê∏ÖÁ©∫„ÄÇ')) {
                        localStorage.clear();
                        location.reload();
                    }
                };

                const saveData = () => {
                    localStorage.setItem('tripDays_v2', JSON.stringify(tripDays.value));
                    localStorage.setItem('expenses', JSON.stringify(expenses.value));
                    localStorage.setItem('members', JSON.stringify(members.value));
                    localStorage.setItem('customFoodSpots', JSON.stringify(customFoodSpots.value));
                };

                watch([tripDays, expenses, members, customFoodSpots], saveData, { deep: true });

                return {
                    currentTab, tripDays, activeDayIndex, currentDayItems, addDay,
                    showItineraryModal, showThaiAddrModal, thaiAddrContent, formItinerary, isEditing, openItineraryModal, editItem, showThaiAddress, saveItinerary, deleteItinerary, openMap,
                    expenses, totalExpense, showExpenseModal, showSettlementModal, formExpense, settlements, openExpenseModal, saveExpense, deleteExpense, getPaidAmount,
                    calcTHB, calcHKD, currentRate, updateFromTHB, updateFromHKD,
                    showSettings, members, newMemberName, addMember, removeMember, resetAllData,
                    // Food Guide
                    foodCategories, activeFoodCategory, filteredFoodSpots, showFoodModal, formFood, openFoodModal, saveFood, deleteCustomFood
                };
            }
        }).mount('#app');
    </script>
    <style>
        @keyframes slide-up {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
    </style>
</body>
</html>
                    foodCategories, activeFoodCategory, filteredFoodSpots, showFoodModal, formFood, openFoodModal, saveFood, deleteCustomFood
                };
            }
        }).mount('#app');
    </script>
    <style>
        @keyframes slide-up {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up {
            animation: slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }
    </style>
</body>
</html>
